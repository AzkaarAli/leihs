<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type" />

  <title>Class: Notification</title>

  <link rel="stylesheet" href="./rdoc.css" type="text/css" media="screen" />

  <script src="./js/jquery.js" type="text/javascript" charset="utf-8"></script>
  <script src="./js/thickbox-compressed.js" type="text/javascript" charset="utf-8"></script>
  <script src="./js/quicksearch.js" type="text/javascript" charset="utf-8"></script>
  <script src="./js/darkfish.js" type="text/javascript" charset="utf-8"></script>

</head>
<body id="top" class="class">

  <div id="metadata">
    <div id="home-metadata">
      <div id="home-section" class="section">
        <h3 class="section-header">
          <a href="./index.html">Home</a>
          <a href="./index.html#classes">Classes</a>
          <a href="./index.html#methods">Methods</a>
        </h3>
      </div>
    </div>

    <div id="file-metadata">
      <div id="file-list-section" class="section">
        <h3 class="section-header">In Files</h3>
        <div class="section-body">
          <ul>
          
            <li><a href="./app/models/notification_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
              class="thickbox" title="app/models/notification.rb">app/models/notification.rb</a></li>
          
          </ul>
        </div>
      </div>

      
    </div>

    <div id="class-metadata">
      
      <!-- Parent Class -->
      <div id="parent-class-section" class="section">
        <h3 class="section-header">Parent</h3>
        
        <p class="link">ActiveRecord::Base</p>
        
      </div>
      

      

      

      
      <!-- Method Quickref -->
      <div id="method-list-section" class="section">
        <h3 class="section-header">Methods</h3>
        <ul class="link-list">
          
          <li><a href="#method-c-deadline_soon_reminder">::deadline_soon_reminder</a></li>
          
          <li><a href="#method-c-order_approved">::order_approved</a></li>
          
          <li><a href="#method-c-order_received">::order_received</a></li>
          
          <li><a href="#method-c-order_rejected">::order_rejected</a></li>
          
          <li><a href="#method-c-order_submitted">::order_submitted</a></li>
          
          <li><a href="#method-c-remind_user">::remind_user</a></li>
          
          <li><a href="#method-c-user_email">::user_email</a></li>
          
        </ul>
      </div>
      

      
    </div>

    <div id="project-metadata">
      
      
      <div id="fileindex-section" class="section project-section">
        <h3 class="section-header">Files</h3>
        <ul>
        
          <li class="file"><a href="./doc/README_FOR_APP.html">README_FOR_APP</a></li>
        
        </ul>
      </div>
      

      <div id="classindex-section" class="section project-section">
        <h3 class="section-header">Class/Module Index
          <span class="search-toggle"><img src="./images/find.png"
            height="16" width="16" alt="[+]"
            title="show/hide quicksearch" /></span></h3>
        <form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
        <fieldset>
          <legend>Quicksearch</legend>
          <input type="text" name="quicksearch" value=""
            class="quicksearch-field" />
        </fieldset>
        </form>

        <ul class="link-list">
        
          <li><a href="./Backend.html">Backend</a></li>
        
          <li><a href="./Backend/AcknowledgeController.html">Backend::AcknowledgeController</a></li>
        
          <li><a href="./Backend/AcknowledgeHelper.html">Backend::AcknowledgeHelper</a></li>
        
          <li><a href="./Backend/AvailabilityController.html">Backend::AvailabilityController</a></li>
        
          <li><a href="./Backend/AvailabilityHelper.html">Backend::AvailabilityHelper</a></li>
        
          <li><a href="./Backend/BackendController.html">Backend::BackendController</a></li>
        
          <li><a href="./Backend/BackendHelper.html">Backend::BackendHelper</a></li>
        
          <li><a href="./Backend/BarcodesController.html">Backend::BarcodesController</a></li>
        
          <li><a href="./Backend/CategoriesController.html">Backend::CategoriesController</a></li>
        
          <li><a href="./Backend/CategoriesHelper.html">Backend::CategoriesHelper</a></li>
        
          <li><a href="./Backend/ContractsController.html">Backend::ContractsController</a></li>
        
          <li><a href="./Backend/GroupsController.html">Backend::GroupsController</a></li>
        
          <li><a href="./Backend/HandOverController.html">Backend::HandOverController</a></li>
        
          <li><a href="./Backend/HandOverHelper.html">Backend::HandOverHelper</a></li>
        
          <li><a href="./Backend/InventoryImport.html">Backend::InventoryImport</a></li>
        
          <li><a href="./Backend/InventoryImport/ImporterController.html">Backend::InventoryImport::ImporterController</a></li>
        
          <li><a href="./Backend/InventoryPoolsController.html">Backend::InventoryPoolsController</a></li>
        
          <li><a href="./Backend/ItemsController.html">Backend::ItemsController</a></li>
        
          <li><a href="./Backend/ItemsHelper.html">Backend::ItemsHelper</a></li>
        
          <li><a href="./Backend/LocationsController.html">Backend::LocationsController</a></li>
        
          <li><a href="./Backend/MailsController.html">Backend::MailsController</a></li>
        
          <li><a href="./Backend/MailsHelper.html">Backend::MailsHelper</a></li>
        
          <li><a href="./Backend/ModelsController.html">Backend::ModelsController</a></li>
        
          <li><a href="./Backend/ModelsHelper.html">Backend::ModelsHelper</a></li>
        
          <li><a href="./Backend/OptionsController.html">Backend::OptionsController</a></li>
        
          <li><a href="./Backend/OrdersController.html">Backend::OrdersController</a></li>
        
          <li><a href="./Backend/TakeBackController.html">Backend::TakeBackController</a></li>
        
          <li><a href="./Backend/TemplatesController.html">Backend::TemplatesController</a></li>
        
          <li><a href="./Backend/UsersController.html">Backend::UsersController</a></li>
        
          <li><a href="./Backend/UsersHelper.html">Backend::UsersHelper</a></li>
        
          <li><a href="./Backend/WorkdaysController.html">Backend::WorkdaysController</a></li>
        
          <li><a href="./Availability.html">Availability</a></li>
        
          <li><a href="./Availability/Change.html">Availability::Change</a></li>
        
          <li><a href="./Availability/Changes.html">Availability::Changes</a></li>
        
          <li><a href="./Availability/DocumentLine.html">Availability::DocumentLine</a></li>
        
          <li><a href="./Availability/Group.html">Availability::Group</a></li>
        
          <li><a href="./Availability/InventoryPool.html">Availability::InventoryPool</a></li>
        
          <li><a href="./Availability/Main.html">Availability::Main</a></li>
        
          <li><a href="./Availability/Model.html">Availability::Model</a></li>
        
          <li><a href="./Availability/Observer.html">Availability::Observer</a></li>
        
          <li><a href="./Availability/Quantity.html">Availability::Quantity</a></li>
        
          <li><a href="./Authenticator.html">Authenticator</a></li>
        
          <li><a href="./Authenticator/AuthenticatorController.html">Authenticator::AuthenticatorController</a></li>
        
          <li><a href="./Authenticator/DatabaseAuthenticationController.html">Authenticator::DatabaseAuthenticationController</a></li>
        
          <li><a href="./Authenticator/LdapAuthenticationController.html">Authenticator::LdapAuthenticationController</a></li>
        
          <li><a href="./Authenticator/ShibbolethAuthenticationController.html">Authenticator::ShibbolethAuthenticationController</a></li>
        
          <li><a href="./Authenticator/ZhdkController.html">Authenticator::ZhdkController</a></li>
        
          <li><a href="./Backup.html">Backup</a></li>
        
          <li><a href="./Backup/Order.html">Backup::Order</a></li>
        
          <li><a href="./Backup/OrderLine.html">Backup::OrderLine</a></li>
        
          <li><a href="./Mailer.html">Mailer</a></li>
        
          <li><a href="./Mailer/Order.html">Mailer::Order</a></li>
        
          <li><a href="./Mailer/User.html">Mailer::User</a></li>
        
          <li><a href="./RoleRequirementSystem.html">RoleRequirementSystem</a></li>
        
          <li><a href="./RoleRequirementSystem/RoleSecurityClassMethods.html">RoleRequirementSystem::RoleSecurityClassMethods</a></li>
        
          <li><a href="./RoleRequirementSystem/RoleSecurityInstanceMethods.html">RoleRequirementSystem::RoleSecurityInstanceMethods</a></li>
        
          <li><a href="./AccessRight.html">AccessRight</a></li>
        
          <li><a href="./Accessory.html">Accessory</a></li>
        
          <li><a href="./ApplicationController.html">ApplicationController</a></li>
        
          <li><a href="./ApplicationHelper.html">ApplicationHelper</a></li>
        
          <li><a href="./Attachment.html">Attachment</a></li>
        
          <li><a href="./AuthenticatedSystem.html">AuthenticatedSystem</a></li>
        
          <li><a href="./AuthenticatedTestHelper.html">AuthenticatedTestHelper</a></li>
        
          <li><a href="./AuthenticationSystem.html">AuthenticationSystem</a></li>
        
          <li><a href="./Building.html">Building</a></li>
        
          <li><a href="./CategoriesController.html">CategoriesController</a></li>
        
          <li><a href="./Category.html">Category</a></li>
        
          <li><a href="./Contract.html">Contract</a></li>
        
          <li><a href="./ContractLine.html">ContractLine</a></li>
        
          <li><a href="./ContractsController.html">ContractsController</a></li>
        
          <li><a href="./DatabaseAuthentication.html">DatabaseAuthentication</a></li>
        
          <li><a href="./Document.html">Document</a></li>
        
          <li><a href="./DocumentLine.html">DocumentLine</a></li>
        
          <li><a href="./Event.html">Event</a></li>
        
          <li><a href="./Factory.html">Factory</a></li>
        
          <li><a href="./FrontendController.html">FrontendController</a></li>
        
          <li><a href="./FrontendHelper.html">FrontendHelper</a></li>
        
          <li><a href="./Group.html">Group</a></li>
        
          <li><a href="./Hijacker.html">Hijacker</a></li>
        
          <li><a href="./History.html">History</a></li>
        
          <li><a href="./Holiday.html">Holiday</a></li>
        
          <li><a href="./Image.html">Image</a></li>
        
          <li><a href="./Importer.html">Importer</a></li>
        
          <li><a href="./InventoryPool.html">InventoryPool</a></li>
        
          <li><a href="./Item.html">Item</a></li>
        
          <li><a href="./ItemLine.html">ItemLine</a></li>
        
          <li><a href="./Language.html">Language</a></li>
        
          <li><a href="./Location.html">Location</a></li>
        
          <li><a href="./LooksLike.html">LooksLike</a></li>
        
          <li><a href="./Model.html">Model</a></li>
        
          <li><a href="./ModelGroup.html">ModelGroup</a></li>
        
          <li><a href="./ModelGroupLink.html">ModelGroupLink</a></li>
        
          <li><a href="./ModelLink.html">ModelLink</a></li>
        
          <li><a href="./ModelsController.html">ModelsController</a></li>
        
          <li><a href="./Notification.html">Notification</a></li>
        
          <li><a href="./Option.html">Option</a></li>
        
          <li><a href="./OptionLine.html">OptionLine</a></li>
        
          <li><a href="./Order.html">Order</a></li>
        
          <li><a href="./OrderLine.html">OrderLine</a></li>
        
          <li><a href="./OrdersController.html">OrdersController</a></li>
        
          <li><a href="./Partition.html">Partition</a></li>
        
          <li><a href="./Property.html">Property</a></li>
        
          <li><a href="./QuickProfilingHelper.html">QuickProfilingHelper</a></li>
        
          <li><a href="./Role.html">Role</a></li>
        
          <li><a href="./RoleRequirementTestHelper.html">RoleRequirementTestHelper</a></li>
        
          <li><a href="./ScopedPartitions.html">ScopedPartitions</a></li>
        
          <li><a href="./SessionsController.html">SessionsController</a></li>
        
          <li><a href="./Supplier.html">Supplier</a></li>
        
          <li><a href="./Template.html">Template</a></li>
        
          <li><a href="./TemplatesController.html">TemplatesController</a></li>
        
          <li><a href="./User.html">User</a></li>
        
          <li><a href="./UsersController.html">UsersController</a></li>
        
          <li><a href="./Workday.html">Workday</a></li>
        
          <li><a href="./WorkdaysHelper.html">WorkdaysHelper</a></li>
        
        </ul>
        <div id="no-class-search-results" style="display: none;">No matching classes.</div>
      </div>

      
    </div>
  </div>

  <div id="documentation">
    <h1 class="class">Notification</h1>

    <div id="description" class="description">
      
<p>The <a href="Notification.html">Notification</a> class is used as a proxy
for sending mails (and possibly other kinds of messages).</p>

<p>The idea behind the <a href="Notification.html">Notification</a> class is
that leihs could in principle keep “mailboxes” for users so that f.ex.
upon login into leihs they could be able to see all the communications with
the leihs system.</p>

    </div><!-- description -->

    
    <div id="5Buntitled-5D" class="documentation-section">
      

      

      

      

      <!-- Methods -->
      
      <div id="public-class-method-details" class="method-section section">
        <h3 class="section-header">Public Class Methods</h3>

      
        <div id="deadline_soon_reminder-method" class="method-detail ">
          <a name="method-c-deadline_soon_reminder"></a>

          
          <div class="method-heading">
            <span class="method-name">deadline_soon_reminder</span><span
              class="method-args">(user, visits, send_mail = true)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="deadline_soon_reminder-source">
<pre>
<span class="ruby-comment"># File app/models/notification.rb, line 59</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">deadline_soon_reminder</span>(<span class="ruby-identifier">user</span>, <span class="ruby-identifier">visits</span>, <span class="ruby-identifier">send_mail</span> = <span class="ruby-keyword">true</span>)
  <span class="ruby-identifier">o</span> = <span class="ruby-constant">Mailer</span><span class="ruby-operator">::</span><span class="ruby-constant">User</span>.<span class="ruby-identifier">deliver_deadline_soon_reminder</span>(<span class="ruby-identifier">user</span>, <span class="ruby-identifier">visits</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">send_mail</span>
  <span class="ruby-identifier">title</span> = (<span class="ruby-identifier">o</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">_</span>(<span class="ruby-string">&quot;Deadline soon&quot;</span>) <span class="ruby-operator">:</span> <span class="ruby-identifier">o</span>.<span class="ruby-identifier">subject</span>)
  <span class="ruby-constant">Notification</span>.<span class="ruby-identifier">create</span>(<span class="ruby-value">:user</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">user</span>, <span class="ruby-value">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">title</span>)
  <span class="ruby-identifier">user</span>.<span class="ruby-identifier">histories</span>.<span class="ruby-identifier">create</span>(<span class="ruby-value">:text</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">title</span>, <span class="ruby-value">:user_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">user</span>.<span class="ruby-identifier">id</span>, <span class="ruby-value">:type_const</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">History</span><span class="ruby-operator">::</span><span class="ruby-constant">ACTION</span>)
<span class="ruby-keyword">end</span></pre>
            </div><!-- deadline_soon_reminder-source -->
            
          </div>

          

          
        </div><!-- deadline_soon_reminder-method -->

      
        <div id="order_approved-method" class="method-detail ">
          <a name="method-c-order_approved"></a>

          
          <div class="method-heading">
            <span class="method-name">order_approved</span><span
              class="method-args">(order, comment, send_mail = true, current_user = nil)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="order_approved-source">
<pre>
<span class="ruby-comment"># File app/models/notification.rb, line 37</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">order_approved</span>(<span class="ruby-identifier">order</span>, <span class="ruby-identifier">comment</span>, <span class="ruby-identifier">send_mail</span> = <span class="ruby-keyword">true</span>, <span class="ruby-identifier">current_user</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">current_user</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">order</span>.<span class="ruby-identifier">user</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">send_mail</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">order</span>.<span class="ruby-identifier">has_changes?</span>
      <span class="ruby-identifier">o</span> = <span class="ruby-constant">Mailer</span><span class="ruby-operator">::</span><span class="ruby-constant">Order</span>.<span class="ruby-identifier">deliver_changed</span>(<span class="ruby-identifier">order</span>, <span class="ruby-identifier">comment</span>)
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">o</span> = <span class="ruby-constant">Mailer</span><span class="ruby-operator">::</span><span class="ruby-constant">Order</span>.<span class="ruby-identifier">deliver_approved</span>(<span class="ruby-identifier">order</span>, <span class="ruby-identifier">comment</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">title</span> = (<span class="ruby-identifier">o</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">_</span>(<span class="ruby-string">&quot;Order approved&quot;</span>) <span class="ruby-operator">:</span> <span class="ruby-identifier">o</span>.<span class="ruby-identifier">subject</span>)
  <span class="ruby-constant">Notification</span>.<span class="ruby-identifier">create</span>(<span class="ruby-value">:user</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">order</span>.<span class="ruby-identifier">user</span>, <span class="ruby-value">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">title</span>)
  <span class="ruby-identifier">order</span>.<span class="ruby-identifier">log_history</span>(<span class="ruby-identifier">title</span>, <span class="ruby-identifier">current_user</span>.<span class="ruby-identifier">id</span>)
<span class="ruby-keyword">end</span></pre>
            </div><!-- order_approved-source -->
            
          </div>

          

          
        </div><!-- order_approved-method -->

      
        <div id="order_received-method" class="method-detail ">
          <a name="method-c-order_received"></a>

          
          <div class="method-heading">
            <span class="method-name">order_received</span><span
              class="method-args">(order, purpose, send_mail = false)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Notify the person responsible for the inventory pool that an order was
received. Can be enabled in config/environment.rb</p>
            

            
            <div class="method-source-code" id="order_received-source">
<pre>
<span class="ruby-comment"># File app/models/notification.rb, line 32</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">order_received</span>(<span class="ruby-identifier">order</span>, <span class="ruby-identifier">purpose</span>, <span class="ruby-identifier">send_mail</span> = <span class="ruby-keyword">false</span>)
  <span class="ruby-identifier">o</span> = <span class="ruby-constant">Mailer</span><span class="ruby-operator">::</span><span class="ruby-constant">Order</span>.<span class="ruby-identifier">deliver_received</span>(<span class="ruby-identifier">order</span>, <span class="ruby-identifier">purpose</span>) <span class="ruby-keyword">if</span> (<span class="ruby-identifier">send_mail</span> <span class="ruby-keyword">and</span> <span class="ruby-constant">DELIVER_ORDER_NOTIFICATIONS</span>)
  <span class="ruby-identifier">title</span> = (<span class="ruby-identifier">o</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">_</span>(<span class="ruby-string">&quot;Order received&quot;</span>) <span class="ruby-operator">:</span> <span class="ruby-identifier">o</span>.<span class="ruby-identifier">subject</span>)
<span class="ruby-keyword">end</span></pre>
            </div><!-- order_received-source -->
            
          </div>

          

          
        </div><!-- order_received-method -->

      
        <div id="order_rejected-method" class="method-detail ">
          <a name="method-c-order_rejected"></a>

          
          <div class="method-heading">
            <span class="method-name">order_rejected</span><span
              class="method-args">(order, comment, send_mail = true, current_user = nil)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="order_rejected-source">
<pre>
<span class="ruby-comment"># File app/models/notification.rb, line 51</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">order_rejected</span>(<span class="ruby-identifier">order</span>, <span class="ruby-identifier">comment</span>, <span class="ruby-identifier">send_mail</span> = <span class="ruby-keyword">true</span>, <span class="ruby-identifier">current_user</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">current_user</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">order</span>.<span class="ruby-identifier">user</span>
  <span class="ruby-identifier">o</span> = <span class="ruby-constant">Mailer</span><span class="ruby-operator">::</span><span class="ruby-constant">Order</span>.<span class="ruby-identifier">deliver_rejected</span>(<span class="ruby-identifier">order</span>, <span class="ruby-identifier">comment</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">send_mail</span>
  <span class="ruby-identifier">title</span> = (<span class="ruby-identifier">o</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">_</span>(<span class="ruby-string">&quot;Order rejected&quot;</span>) <span class="ruby-operator">:</span> <span class="ruby-identifier">o</span>.<span class="ruby-identifier">subject</span>)
  <span class="ruby-constant">Notification</span>.<span class="ruby-identifier">create</span>(<span class="ruby-value">:user</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">order</span>.<span class="ruby-identifier">user</span>, <span class="ruby-value">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">title</span>)
  <span class="ruby-identifier">order</span>.<span class="ruby-identifier">log_history</span>(<span class="ruby-identifier">title</span>, <span class="ruby-identifier">current_user</span>.<span class="ruby-identifier">id</span>)
<span class="ruby-keyword">end</span></pre>
            </div><!-- order_rejected-source -->
            
          </div>

          

          
        </div><!-- order_rejected-method -->

      
        <div id="order_submitted-method" class="method-detail ">
          <a name="method-c-order_submitted"></a>

          
          <div class="method-heading">
            <span class="method-name">order_submitted</span><span
              class="method-args">(order, purpose, send_mail = false)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="order_submitted-source">
<pre>
<span class="ruby-comment"># File app/models/notification.rb, line 23</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">order_submitted</span>(<span class="ruby-identifier">order</span>, <span class="ruby-identifier">purpose</span>, <span class="ruby-identifier">send_mail</span> = <span class="ruby-keyword">false</span>)
  <span class="ruby-identifier">o</span> = <span class="ruby-constant">Mailer</span><span class="ruby-operator">::</span><span class="ruby-constant">Order</span>.<span class="ruby-identifier">deliver_submitted</span>(<span class="ruby-identifier">order</span>, <span class="ruby-identifier">purpose</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">send_mail</span>
  <span class="ruby-identifier">title</span> = (<span class="ruby-identifier">o</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">_</span>(<span class="ruby-string">&quot;Order submitted&quot;</span>) <span class="ruby-operator">:</span> <span class="ruby-identifier">o</span>.<span class="ruby-identifier">subject</span>)
  <span class="ruby-constant">Notification</span>.<span class="ruby-identifier">create</span>(<span class="ruby-value">:user</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">order</span>.<span class="ruby-identifier">user</span>, <span class="ruby-value">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">title</span>)
  <span class="ruby-identifier">order</span>.<span class="ruby-identifier">log_history</span>(<span class="ruby-identifier">title</span>, <span class="ruby-identifier">order</span>.<span class="ruby-identifier">user</span>.<span class="ruby-identifier">id</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">order</span>.<span class="ruby-identifier">user</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- order_submitted-source -->
            
          </div>

          

          
        </div><!-- order_submitted-method -->

      
        <div id="remind_user-method" class="method-detail ">
          <a name="method-c-remind_user"></a>

          
          <div class="method-heading">
            <span class="method-name">remind_user</span><span
              class="method-args">(user, visits, send_mail = true)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="remind_user-source">
<pre>
<span class="ruby-comment"># File app/models/notification.rb, line 67</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">remind_user</span>(<span class="ruby-identifier">user</span>, <span class="ruby-identifier">visits</span>, <span class="ruby-identifier">send_mail</span> = <span class="ruby-keyword">true</span>)
  <span class="ruby-identifier">o</span> = <span class="ruby-constant">Mailer</span><span class="ruby-operator">::</span><span class="ruby-constant">User</span>.<span class="ruby-identifier">deliver_remind</span>(<span class="ruby-identifier">user</span>, <span class="ruby-identifier">visits</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">send_mail</span>
  <span class="ruby-identifier">title</span> = (<span class="ruby-identifier">o</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">_</span>(<span class="ruby-string">&quot;Reminder&quot;</span>) <span class="ruby-operator">:</span> <span class="ruby-identifier">o</span>.<span class="ruby-identifier">subject</span>)
  <span class="ruby-constant">Notification</span>.<span class="ruby-identifier">create</span>(<span class="ruby-value">:user</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">user</span>, <span class="ruby-value">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">title</span>)
  <span class="ruby-identifier">user</span>.<span class="ruby-identifier">histories</span>.<span class="ruby-identifier">create</span>(<span class="ruby-value">:text</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">title</span>, <span class="ruby-value">:user_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">user</span>.<span class="ruby-identifier">id</span>, <span class="ruby-value">:type_const</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">History</span><span class="ruby-operator">::</span><span class="ruby-constant">ACTION</span>)
<span class="ruby-keyword">end</span></pre>
            </div><!-- remind_user-source -->
            
          </div>

          

          
        </div><!-- remind_user-method -->

      
        <div id="user_email-method" class="method-detail ">
          <a name="method-c-user_email"></a>

          
          <div class="method-heading">
            <span class="method-name">user_email</span><span
              class="method-args">(from, to, subject, body)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="user_email-source">
<pre>
<span class="ruby-comment"># File app/models/notification.rb, line 74</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">user_email</span>(<span class="ruby-identifier">from</span>, <span class="ruby-identifier">to</span>, <span class="ruby-identifier">subject</span>, <span class="ruby-identifier">body</span>)
  <span class="ruby-constant">Mailer</span><span class="ruby-operator">::</span><span class="ruby-constant">User</span>.<span class="ruby-identifier">deliver_email</span> <span class="ruby-identifier">from</span>, <span class="ruby-identifier">to</span>, <span class="ruby-identifier">subject</span>, <span class="ruby-identifier">body</span>
  <span class="ruby-comment"># we currently do *not* log emails to users</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- user_email-source -->
            
          </div>

          

          
        </div><!-- user_email-method -->

      
      </div><!-- public-class-method-details -->
    
    </div><!-- 5Buntitled-5D -->
  

  </div><!-- documentation -->

  <div id="validator-badges">
    <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
    <p><small>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish
      Rdoc Generator</a> 2</small>.</p>
  </div>

</body>
</html>

