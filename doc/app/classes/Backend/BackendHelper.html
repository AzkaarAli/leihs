<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Module: Backend::BackendHelper</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href="../.././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Module</strong></td>
          <td class="class-name-in-header">Backend::BackendHelper</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../../files/app/helpers/backend/backend_helper_rb.html">
                app/helpers/backend/backend_helper.rb
                </a>
        <br />
            </td>
        </tr>

        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">



   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000229">controller_bar</a>&nbsp;&nbsp;
      <a href="#M000239">datepicker</a>&nbsp;&nbsp;
      <a href="#M000234">enable_loading_panel</a>&nbsp;&nbsp;
      <a href="#M000233">enable_tooltip</a>&nbsp;&nbsp;
      <a href="#M000235">extjs_include</a>&nbsp;&nbsp;
      <a href="#M000237">extjs_model_tree</a>&nbsp;&nbsp;
      <a href="#M000236">extjs_tree_style</a>&nbsp;&nbsp;
      <a href="#M000241">lines_preview</a>&nbsp;&nbsp;
      <a href="#M000242">lines_summary</a>&nbsp;&nbsp;
      <a href="#M000240">select_tag_for_buildings</a>&nbsp;&nbsp;
      <a href="#M000232">show_line_model</a>&nbsp;&nbsp;
      <a href="#M000231">show_reserver</a>&nbsp;&nbsp;
      <a href="#M000227">table</a>&nbsp;&nbsp;
      <a href="#M000230">table_tag</a>&nbsp;&nbsp;
      <a href="#M000228">table_with_search_and_pagination</a>&nbsp;&nbsp;
      <a href="#M000238">time_line</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">





      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M000229" class="method-detail">
        <a name="M000229"></a>

        <div class="method-heading">
          <a href="#M000229" class="method-signature">
          <span class="method-name">controller_bar</span><span class="method-args">(records, with_search_field = false, query = params[:query], filter = params[:filter])</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000229-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000229-source">
<pre>
    <span class="ruby-comment cmt"># File app/helpers/backend/backend_helper.rb, line 17</span>
17:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">controller_bar</span>(<span class="ruby-identifier">records</span>, <span class="ruby-identifier">with_search_field</span> = <span class="ruby-keyword kw">false</span>, <span class="ruby-identifier">query</span> = <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:query</span>], <span class="ruby-identifier">filter</span> = <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:filter</span>])
18:     <span class="ruby-identifier">query</span> = <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">query</span>.<span class="ruby-identifier">blank?</span>
19: 
20:     <span class="ruby-identifier">content_tag</span> <span class="ruby-identifier">:div</span>, <span class="ruby-identifier">:class</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;table-overview controller&quot;</span> <span class="ruby-keyword kw">do</span>
21:       <span class="ruby-identifier">r</span> = <span class="ruby-value str">&quot;&quot;</span>
22:       <span class="ruby-identifier">filter_params</span> = <span class="ruby-identifier">request</span>.<span class="ruby-identifier">path_parameters</span>.<span class="ruby-identifier">keys</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;query&quot;</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;page&quot;</span>
23:       <span class="ruby-identifier">parameters</span> = <span class="ruby-value str">&quot;&quot;</span>
24:       <span class="ruby-identifier">params</span>.<span class="ruby-identifier">each</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">k</span>,<span class="ruby-identifier">v</span><span class="ruby-operator">|</span> <span class="ruby-identifier">parameters</span> <span class="ruby-operator">+=</span> <span class="ruby-node">&quot;, #{k}: '#{v}'&quot;</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">filter_params</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">k</span>) }
25:       
26:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">with_search_field</span>
27:         <span class="ruby-identifier">r</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">text_field_tag</span> <span class="ruby-identifier">:query</span>, <span class="ruby-identifier">query</span>, <span class="ruby-identifier">:onchange</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;new Ajax.Updater('list_table', '', {asynchronous:true, evalScripts:true, method:'get', parameters: {query: this.value #{parameters}}}); return false;&quot;</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'search_field'</span>
28:         <span class="ruby-identifier">r</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">javascript_tag</span>(<span class="ruby-value str">&quot;$('search_field').focus()&quot;</span>)
29:       <span class="ruby-keyword kw">end</span>
30:       
31:       <span class="ruby-identifier">r</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">content_tag</span> <span class="ruby-identifier">:div</span>, <span class="ruby-identifier">:class</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;result&quot;</span>, <span class="ruby-identifier">:style</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;min-height: 200px;&quot;</span> <span class="ruby-keyword kw">do</span>
32:         <span class="ruby-identifier">s</span> = <span class="ruby-identifier">_</span>(<span class="ruby-value str">&quot; &lt;b&gt;%d&lt;/b&gt; results&quot;</span>) <span class="ruby-operator">%</span> <span class="ruby-identifier">records</span>.<span class="ruby-identifier">total_entries</span>
33:         <span class="ruby-identifier">s</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">_</span>(<span class="ruby-value str">&quot; for &lt;b&gt;%s&lt;/b&gt;&quot;</span>) <span class="ruby-operator">%</span> <span class="ruby-identifier">query</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">query</span>
34:         <span class="ruby-identifier">s</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">_</span>(<span class="ruby-value str">&quot; filtering &lt;b&gt;%s&lt;/b&gt;&quot;</span>) <span class="ruby-operator">%</span> <span class="ruby-identifier">filter</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">filter</span>
35:         <span class="ruby-identifier">w</span> = <span class="ruby-identifier">will_paginate</span> <span class="ruby-identifier">records</span>, <span class="ruby-identifier">:previous_label</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">_</span>(<span class="ruby-value str">&quot;Previous&quot;</span>), <span class="ruby-identifier">:next_label</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">_</span>(<span class="ruby-value str">&quot;Next&quot;</span>)
36:         <span class="ruby-identifier">s</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">w</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">w</span>
37:         <span class="ruby-identifier">s</span>
38:       <span class="ruby-keyword kw">end</span>
39:       <span class="ruby-identifier">r</span>
40:     <span class="ruby-keyword kw">end</span>
41:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000239" class="method-detail">
        <a name="M000239"></a>

        <div class="method-heading">
          <a href="#M000239" class="method-signature">
          <span class="method-name">datepicker</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000239-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000239-source">
<pre>
     <span class="ruby-comment cmt"># File app/helpers/backend/backend_helper.rb, line 532</span>
532:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">datepicker</span>
533:     <span class="ruby-identifier">content_tag</span> <span class="ruby-identifier">:table</span>, <span class="ruby-identifier">:class</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'availability_overview'</span> <span class="ruby-keyword kw">do</span>
534:       <span class="ruby-identifier">tr</span> = <span class="ruby-identifier">content_tag</span> <span class="ruby-identifier">:tr</span>, <span class="ruby-identifier">:class</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'availability'</span> <span class="ruby-keyword kw">do</span>
535:         <span class="ruby-identifier">th</span> = <span class="ruby-identifier">content_tag</span> <span class="ruby-identifier">:th</span> <span class="ruby-keyword kw">do</span>
536:           <span class="ruby-identifier">_</span>(<span class="ruby-value str">&quot;Month&quot;</span>)
537:         <span class="ruby-keyword kw">end</span>
538:         <span class="ruby-value">1</span>.<span class="ruby-identifier">upto</span>(<span class="ruby-value">31</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span>
539:           <span class="ruby-identifier">th</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">content_tag</span> <span class="ruby-identifier">:th</span>, <span class="ruby-identifier">:style</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;min-width: 2em; padding: 0; text-align: center;&quot;</span> <span class="ruby-keyword kw">do</span>
540:                   <span class="ruby-identifier">i</span>
541:                 <span class="ruby-keyword kw">end</span>
542:         <span class="ruby-keyword kw">end</span>
543:         <span class="ruby-identifier">th</span>
544:       <span class="ruby-keyword kw">end</span>
545: 
546:       <span class="ruby-value">12</span>.<span class="ruby-identifier">times</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span>
547:         <span class="ruby-identifier">start_date</span> = <span class="ruby-identifier">i</span>.<span class="ruby-identifier">months</span>.<span class="ruby-identifier">from_now</span>.<span class="ruby-identifier">to_date</span>.<span class="ruby-identifier">beginning_of_month</span>
548:         <span class="ruby-identifier">end_date</span> = <span class="ruby-identifier">i</span>.<span class="ruby-identifier">months</span>.<span class="ruby-identifier">from_now</span>.<span class="ruby-identifier">to_date</span>.<span class="ruby-identifier">end_of_month</span>
549: 
550:         <span class="ruby-identifier">tr</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">content_tag</span> <span class="ruby-identifier">:tr</span>, <span class="ruby-identifier">:class</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'availability'</span> <span class="ruby-keyword kw">do</span>
551:                 <span class="ruby-identifier">td</span> = <span class="ruby-identifier">content_tag</span> <span class="ruby-identifier">:th</span> <span class="ruby-keyword kw">do</span>
552:                   <span class="ruby-identifier">start_date</span>.<span class="ruby-identifier">to_formatted_s</span>(<span class="ruby-identifier">:month_and_year</span>)
553:                 <span class="ruby-keyword kw">end</span>
554:                 (<span class="ruby-identifier">start_date</span><span class="ruby-operator">..</span><span class="ruby-identifier">end_date</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">d</span><span class="ruby-operator">|</span>
555:                   <span class="ruby-identifier">style</span> = (<span class="ruby-identifier">current_inventory_pool</span>.<span class="ruby-identifier">is_open_on?</span>(<span class="ruby-identifier">d</span>) <span class="ruby-operator">?</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-operator">:</span> <span class="ruby-value str">&quot;background-color: grey;&quot;</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">current_inventory_pool</span>
556:                   <span class="ruby-identifier">td</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">content_tag</span> <span class="ruby-identifier">:td</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">d</span>.<span class="ruby-identifier">to_formatted_s</span>(<span class="ruby-identifier">:db</span>),
557:                                          <span class="ruby-identifier">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">d</span>.<span class="ruby-identifier">to_formatted_s</span>(<span class="ruby-identifier">:with_weekday_name</span>),
558:                                          <span class="ruby-identifier">:class</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;datepicker_date&quot;</span>,
559:                                          <span class="ruby-identifier">:style</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">style</span> <span class="ruby-keyword kw">do</span> <span class="ruby-keyword kw">end</span>
560:                 <span class="ruby-keyword kw">end</span>
561:                 (<span class="ruby-value">31</span><span class="ruby-operator">-</span><span class="ruby-identifier">end_date</span>.<span class="ruby-identifier">day</span>).<span class="ruby-identifier">times</span> <span class="ruby-keyword kw">do</span>
562:                   <span class="ruby-identifier">td</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">content_tag</span> <span class="ruby-identifier">:td</span>, <span class="ruby-identifier">:class</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;datepicker_nodate&quot;</span> <span class="ruby-keyword kw">do</span> <span class="ruby-keyword kw">end</span>
563:                 <span class="ruby-keyword kw">end</span>
564:                 <span class="ruby-identifier">td</span>
565:               <span class="ruby-keyword kw">end</span>
566:       <span class="ruby-keyword kw">end</span>
567:       <span class="ruby-identifier">tr</span>
568:     <span class="ruby-keyword kw">end</span>
569:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000234" class="method-detail">
        <a name="M000234"></a>

        <div class="method-heading">
          <a href="#M000234" class="method-signature">
          <span class="method-name">enable_loading_panel</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000234-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000234-source">
<pre>
     <span class="ruby-comment cmt"># File app/helpers/backend/backend_helper.rb, line 145</span>
145:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">enable_loading_panel</span>
146:     <span class="ruby-identifier">h</span> = <span class="ruby-identifier">javascript_tag</span> <span class="ruby-keyword kw">do</span>
147:         <span class="ruby-value str">&quot;Ajax.Responders.register({
148:             onCreate: function(){ $('loading_panel').style.visibility='visible'; },
149:             onComplete: function(){ decoGreyboxLinks();
150:                                     $('loading_panel').style.visibility='hidden'; }
151:         });&quot;</span>
152:     <span class="ruby-keyword kw">end</span>
153:     <span class="ruby-identifier">h</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">content_tag</span> <span class="ruby-identifier">:div</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'loading_panel'</span> <span class="ruby-keyword kw">do</span>
154:         <span class="ruby-identifier">r</span> = <span class="ruby-identifier">image_tag</span>(<span class="ruby-value str">&quot;spinner.gif&quot;</span>, <span class="ruby-identifier">:class</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;loading_spinner&quot;</span>)
155:         <span class="ruby-identifier">r</span> <span class="ruby-operator">+=</span> <span class="ruby-value str">&quot; &quot;</span>
156:         <span class="ruby-identifier">r</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">_</span>(<span class="ruby-value str">&quot;Loading&quot;</span>)
157:         <span class="ruby-identifier">r</span> <span class="ruby-operator">+=</span> <span class="ruby-value str">&quot;...&quot;</span>
158:     <span class="ruby-keyword kw">end</span>
159:     <span class="ruby-identifier">h</span>
160:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000233" class="method-detail">
        <a name="M000233"></a>

        <div class="method-heading">
          <a href="#M000233" class="method-signature">
          <span class="method-name">enable_tooltip</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000233-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000233-source">
<pre>
     <span class="ruby-comment cmt"># File app/helpers/backend/backend_helper.rb, line 129</span>
129:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">enable_tooltip</span>
130: <span class="ruby-comment cmt">#temp#    </span>
131: <span class="ruby-comment cmt">#    javascript_tag do</span>
132: <span class="ruby-comment cmt">#      '$$(&quot;.valid_false&quot;).each( function(tip) { new Tooltip(tip, {opacity: &quot;.85&quot;, backgroundColor: &quot;#FC9&quot;, borderColor: &quot;#C96&quot;, textColor: &quot;#000&quot;, textShadowColor: &quot;#FFF&quot;}); });</span>
133: <span class="ruby-comment cmt">#       $$(&quot;.with_tooltip&quot;).each( function(tip) { new Tooltip(tip, {opacity: &quot;.85&quot;, backgroundColor: &quot;#FC9&quot;, borderColor: &quot;#C96&quot;, textColor: &quot;#000&quot;, textShadowColor: &quot;#FFF&quot;}); });'</span>
134: <span class="ruby-comment cmt">#    end</span>
135:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000235" class="method-detail">
        <a name="M000235"></a>

        <div class="method-heading">
          <a href="#M000235" class="method-signature">
          <span class="method-name">extjs_include</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000235-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000235-source">
<pre>
     <span class="ruby-comment cmt"># File app/helpers/backend/backend_helper.rb, line 164</span>
164:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">extjs_include</span>
165:     <span class="ruby-identifier">html</span> = <span class="ruby-identifier">stylesheet_link_tag</span> <span class="ruby-value str">&quot;/javascripts/ext/resources/css/ext-all.css&quot;</span>
166:     <span class="ruby-identifier">html</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">javascript_include_tag</span> <span class="ruby-value str">&quot;/javascripts/ext/adapter/prototype/ext-prototype-adapter.js&quot;</span>
167:     <span class="ruby-identifier">html</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">javascript_include_tag</span> <span class="ruby-value str">&quot;/javascripts/ext/ext-all.js&quot;</span>
168:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000237" class="method-detail">
        <a name="M000237"></a>

        <div class="method-heading">
          <a href="#M000237" class="method-signature">
          <span class="method-name">extjs_model_tree</span><span class="method-args">(checkable = false, checked_nodes = [])</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000237-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000237-source">
<pre>
     <span class="ruby-comment cmt"># File app/helpers/backend/backend_helper.rb, line 183</span>
183:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">extjs_model_tree</span>(<span class="ruby-identifier">checkable</span> = <span class="ruby-keyword kw">false</span>, <span class="ruby-identifier">checked_nodes</span> = [])
184:     <span class="ruby-identifier">html</span> = <span class="ruby-identifier">extjs_include</span>
185:     <span class="ruby-identifier">html</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">extjs_tree_style</span>
186: 
187:     <span class="ruby-comment cmt"># TODO 04** prevent render modal layout inside another modal layout</span>
188:     <span class="ruby-identifier">filter_params</span> = <span class="ruby-identifier">request</span>.<span class="ruby-identifier">path_parameters</span>.<span class="ruby-identifier">keys</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;category_id&quot;</span>
189:     <span class="ruby-identifier">parameters</span> = <span class="ruby-value str">&quot;&quot;</span>
190:     <span class="ruby-identifier">params</span>.<span class="ruby-identifier">each</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">k</span>,<span class="ruby-identifier">v</span><span class="ruby-operator">|</span> <span class="ruby-identifier">parameters</span> <span class="ruby-operator">+=</span> <span class="ruby-node">&quot;, #{k}: '#{v}'&quot;</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">filter_params</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">k</span>) }
191: 
192:     <span class="ruby-identifier">html</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">javascript_tag</span> <span class="ruby-keyword kw">do</span>
193:       <span class="ruby-node">&quot;
194:       start = function(){
195:   
196:         var categories_loader = new Ext.tree.TreeLoader({
197:           url: '#{url_for(:controller =&gt; :categories, :format =&gt; :ext_json)}',
198:           requestMethod:'GET'
199:         });
200:     
201:         categories_loader.on('beforeload', function(treeLoader, node) {
202:             treeLoader.baseParams.category_id = (node.attributes.real_id ? node.attributes.real_id : '');
203:           }, this);
204:   
205:         // create the tree
206:         var categories_panel = new Ext.tree.TreePanel({
207:           loader: categories_loader,
208:           title: '#{_(&quot;Categories&quot;)}',
209:           collapsible: false,
210:           border: false,
211:           animate:true,
212:           autoScroll:true,
213:           rootVisible:true,
214:           root: {
215:               nodeType: 'async',
216:               text: '#{_(&quot;All&quot;)}',
217:               id:'ynode-0',
218:               leaf: false,
219:               real_id: '0'
220:           },
221:           renderTo: 'categories',
222:           hlColor: '#FF0000',
223:           //frame: true,
224:           listeners: {
225:             click: function( node, e ){
226:               if(node.attributes.real_id != '') node.toggle();
227:               if(!#{checkable}) new Ajax.Updater('list_table', '', {asynchronous:true, evalScripts:true, method:'get', parameters: {category_id: node.attributes.real_id #{parameters}}}); return false;
228:             },
229:             checkchange: function(node, checked){
230:               new Ajax.Request('#{url_for()}', {method: (checked ? 'post' : 'delete'), parameters: {category_id: node.attributes.real_id, #{request_forgery_protection_token}: '#{escape_javascript form_authenticity_token}' #{parameters}}}); return false;
231:             }
232:           }
233:         });
234: 
235:         categories_panel.on('beforechildrenrendered', function(node){
236:           node.childNodes.each(function(element) {
237:             element.attributes.icon = '#{icon_path('bullet_yellow')}';
238:             if(#{checkable}){
239:               element.attributes.checked = #{checked_nodes.collect(&amp;:id).to_json}.include(element.attributes.real_id);
240:               if(#{Array(checked_nodes).collect(&amp;:all_parents).flatten.uniq.collect(&amp;:id).to_json}.include(element.attributes.real_id)) element.expand();
241:             }
242:           });
243:         }, this);
244: 
245:         // expand root node to trigger load of the first level of actual data
246:         categories_panel.getRootNode().expand();
247:       };
248:   
249:     Ext.onReady(start);
250:     &quot;</span>
251:     <span class="ruby-keyword kw">end</span>
252:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">html</span>
253:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000236" class="method-detail">
        <a name="M000236"></a>

        <div class="method-heading">
          <a href="#M000236" class="method-signature">
          <span class="method-name">extjs_tree_style</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000236-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000236-source">
<pre>
     <span class="ruby-comment cmt"># File app/helpers/backend/backend_helper.rb, line 170</span>
170:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">extjs_tree_style</span>
171:     <span class="ruby-identifier">content_tag</span> <span class="ruby-identifier">:style</span>, <span class="ruby-identifier">:type</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;text/css&quot;</span> <span class="ruby-keyword kw">do</span>
172:       <span class="ruby-value str">&quot;
173:       .x-tree .x-panel-body {
174:         background-color: transparent;
175:       }
176:       .x-tree-node .x-tree-node-over {
177:         background-color: #CCCCCC;
178:       }
179:       &quot;</span>
180:     <span class="ruby-keyword kw">end</span>
181:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000241" class="method-detail">
        <a name="M000241"></a>

        <div class="method-heading">
          <a href="#M000241" class="method-signature">
          <span class="method-name">lines_preview</span><span class="method-args">(document)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000241-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000241-source">
<pre>
     <span class="ruby-comment cmt"># File app/helpers/backend/backend_helper.rb, line 579</span>
579:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">lines_preview</span>(<span class="ruby-identifier">document</span>)
580:     <span class="ruby-identifier">s</span> = <span class="ruby-value">3</span>
581:     <span class="ruby-identifier">r</span> = <span class="ruby-identifier">document</span>.<span class="ruby-identifier">lines</span>[<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-identifier">s</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>].<span class="ruby-identifier">collect</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">l</span><span class="ruby-operator">|</span> <span class="ruby-identifier">l</span>.<span class="ruby-identifier">model</span>.<span class="ruby-identifier">name</span> }
582:     <span class="ruby-identifier">r</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;...&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">document</span>.<span class="ruby-identifier">lines</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-identifier">s</span>
583:     <span class="ruby-identifier">r</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">', '</span>)
584:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000242" class="method-detail">
        <a name="M000242"></a>

        <div class="method-heading">
          <a href="#M000242" class="method-signature">
          <span class="method-name">lines_summary</span><span class="method-args">(lines)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000242-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000242-source">
<pre>
     <span class="ruby-comment cmt"># File app/helpers/backend/backend_helper.rb, line 586</span>
586:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">lines_summary</span>(<span class="ruby-identifier">lines</span>)
587:     <span class="ruby-identifier">content_tag</span> <span class="ruby-identifier">:table</span> <span class="ruby-keyword kw">do</span>
588:       <span class="ruby-identifier">s</span> = <span class="ruby-value str">&quot;&quot;</span>
589:       <span class="ruby-identifier">lines</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">l</span><span class="ruby-operator">|</span>
590:         <span class="ruby-identifier">s</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">content_tag</span> <span class="ruby-identifier">:tr</span> <span class="ruby-keyword kw">do</span>
591:           <span class="ruby-identifier">r</span> = <span class="ruby-value str">&quot;&quot;</span>
592:           <span class="ruby-identifier">permission_needed</span> = (<span class="ruby-identifier">l</span>.<span class="ruby-identifier">item</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">l</span>.<span class="ruby-identifier">item</span>.<span class="ruby-identifier">needs_permission?</span>)
593:           <span class="ruby-identifier">r</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">content_tag</span> <span class="ruby-identifier">:td</span>, <span class="ruby-identifier">:style</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;text-align: right;&quot;</span> <span class="ruby-keyword kw">do</span>
594:             
595:             <span class="ruby-identifier">l</span>.<span class="ruby-identifier">quantity</span>
596:           <span class="ruby-keyword kw">end</span>
597:           <span class="ruby-identifier">r</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">content_tag</span> <span class="ruby-identifier">:td</span>, <span class="ruby-identifier">:class</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;#{permission_needed ? &quot;closed&quot; : &quot;&quot;}&quot;</span> <span class="ruby-keyword kw">do</span> 
598:             
599:             <span class="ruby-node">&quot;#{permission_needed ? _(&quot;Permission needed:&lt;br/&gt;&quot;) : &quot;&quot;}#{l.model.name}&quot;</span>
600:           <span class="ruby-keyword kw">end</span>
601:           <span class="ruby-identifier">r</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">content_tag</span> <span class="ruby-identifier">:td</span> <span class="ruby-keyword kw">do</span>
602:             <span class="ruby-identifier">l</span>.<span class="ruby-identifier">item</span>.<span class="ruby-identifier">inventory_code</span>
603:           <span class="ruby-keyword kw">end</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">l</span>.<span class="ruby-identifier">item</span>.<span class="ruby-identifier">nil?</span>
604:           <span class="ruby-identifier">r</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">content_tag</span> <span class="ruby-identifier">:td</span> <span class="ruby-keyword kw">do</span>
605:             <span class="ruby-identifier">dates_with_period</span>(<span class="ruby-identifier">l</span>.<span class="ruby-identifier">start_date</span>, <span class="ruby-identifier">l</span>.<span class="ruby-identifier">end_date</span>)
606:           <span class="ruby-keyword kw">end</span>
607:           <span class="ruby-identifier">r</span>
608:         <span class="ruby-keyword kw">end</span>
609:       <span class="ruby-keyword kw">end</span>
610:       <span class="ruby-identifier">s</span>
611:     <span class="ruby-keyword kw">end</span>
612:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000240" class="method-detail">
        <a name="M000240"></a>

        <div class="method-heading">
          <a href="#M000240" class="method-signature">
          <span class="method-name">select_tag_for_buildings</span><span class="method-args">(selected = nil)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000240-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000240-source">
<pre>
     <span class="ruby-comment cmt"># File app/helpers/backend/backend_helper.rb, line 573</span>
573:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">select_tag_for_buildings</span>(<span class="ruby-identifier">selected</span> = <span class="ruby-keyword kw">nil</span>)
574:     <span class="ruby-identifier">select_tag</span> <span class="ruby-value str">'location[building_id]'</span>, <span class="ruby-node">&quot;&lt;option value=''&gt;#{_(&quot;None&quot;)}&lt;/option&gt;&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">options_from_collection_for_select</span>(<span class="ruby-constant">Building</span>.<span class="ruby-identifier">all</span>, <span class="ruby-identifier">:id</span>, <span class="ruby-identifier">:to_s</span>, <span class="ruby-identifier">selected</span>)
575:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000232" class="method-detail">
        <a name="M000232"></a>

        <div class="method-heading">
          <a href="#M000232" class="method-signature">
          <span class="method-name">show_line_model</span><span class="method-args">(model)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000232-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000232-source">
<pre>
     <span class="ruby-comment cmt"># File app/helpers/backend/backend_helper.rb, line 107</span>
107:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">show_line_model</span>(<span class="ruby-identifier">model</span>)
108:     <span class="ruby-identifier">html</span> = <span class="ruby-identifier">greybox_link_to_page</span>(<span class="ruby-identifier">model</span>.<span class="ruby-identifier">name</span>,
109:             <span class="ruby-identifier">backend_inventory_pool_model_path</span>(<span class="ruby-identifier">current_inventory_pool</span>, <span class="ruby-identifier">model</span>, <span class="ruby-identifier">:layout</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;modal&quot;</span>),
110:             <span class="ruby-identifier">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">_</span>(<span class="ruby-value str">&quot;Model&quot;</span>),
111:             <span class="ruby-identifier">:class</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;thickbox iconized-notxt edit-package&quot;</span>, <span class="ruby-identifier">:width</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1000</span> )
112: 
113:     <span class="ruby-identifier">html</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">content_tag</span> <span class="ruby-identifier">:ul</span>, <span class="ruby-identifier">:class</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;model_group&quot;</span> <span class="ruby-keyword kw">do</span>
114:       <span class="ruby-identifier">r</span> = <span class="ruby-value str">&quot;&quot;</span>
115:       <span class="ruby-identifier">model</span>.<span class="ruby-identifier">package_models</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">model</span><span class="ruby-operator">|</span>         
116:         <span class="ruby-identifier">r</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">content_tag</span> <span class="ruby-identifier">:li</span> <span class="ruby-keyword kw">do</span>
117:           <span class="ruby-identifier">model</span>.<span class="ruby-identifier">name</span>
118:         <span class="ruby-keyword kw">end</span>
119:       <span class="ruby-keyword kw">end</span>
120:       <span class="ruby-identifier">r</span>
121:     <span class="ruby-keyword kw">end</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">model</span>.<span class="ruby-identifier">is_package?</span> 
122:     
123:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">html</span>
124:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000231" class="method-detail">
        <a name="M000231"></a>

        <div class="method-heading">
          <a href="#M000231" class="method-signature">
          <span class="method-name">show_reserver</span><span class="method-args">(user)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000231-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000231-source">
<pre>
     <span class="ruby-comment cmt"># File app/helpers/backend/backend_helper.rb, line 87</span>
 87:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">show_reserver</span>(<span class="ruby-identifier">user</span>)
 88:     <span class="ruby-identifier">content_tag</span> <span class="ruby-identifier">:table</span> <span class="ruby-keyword kw">do</span>
 89:       <span class="ruby-identifier">content_tag</span> <span class="ruby-identifier">:tr</span> <span class="ruby-keyword kw">do</span>
 90:         <span class="ruby-identifier">content_tag</span> <span class="ruby-identifier">:td</span> <span class="ruby-keyword kw">do</span>
 91:           <span class="ruby-identifier">r</span> = <span class="ruby-identifier">_</span>(<span class="ruby-value str">&quot;Reserver&quot;</span>) <span class="ruby-operator">+</span><span class="ruby-value str">': '</span>
 92:           <span class="ruby-identifier">r</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">greybox_link_to_page</span>(<span class="ruby-identifier">user</span>.<span class="ruby-identifier">name</span>,
 93:                     <span class="ruby-identifier">backend_inventory_pool_user_path</span>(<span class="ruby-identifier">current_inventory_pool</span>, <span class="ruby-identifier">user</span>, <span class="ruby-identifier">:layout</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;modal&quot;</span>),
 94:                     <span class="ruby-identifier">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">_</span>(<span class="ruby-value str">&quot;User&quot;</span>),
 95:                     <span class="ruby-identifier">:class</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;iconized-notxt edit-user&quot;</span> )
 96:           <span class="ruby-identifier">r</span> <span class="ruby-operator">+=</span> <span class="ruby-value str">'&lt;br /&gt;'</span>
 97:           <span class="ruby-identifier">r</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">render</span> <span class="ruby-identifier">:partial</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'backend/users/resume'</span>
 98:           <span class="ruby-identifier">r</span>
 99:         <span class="ruby-keyword kw">end</span>
100:       <span class="ruby-keyword kw">end</span>
101:     <span class="ruby-keyword kw">end</span>
102:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000227" class="method-detail">
        <a name="M000227"></a>

        <div class="method-heading">
          <a href="#M000227" class="method-signature">
          <span class="method-name">table</span><span class="method-args">(options = {}, html_options = {}, &amp;block)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000227-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000227-source">
<pre>
   <span class="ruby-comment cmt"># File app/helpers/backend/backend_helper.rb, line 3</span>
3:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">table</span>(<span class="ruby-identifier">options</span> = {}, <span class="ruby-identifier">html_options</span> = {}, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
4:     <span class="ruby-identifier">html</span> = <span class="ruby-identifier">table_tag</span>(<span class="ruby-identifier">options</span>, <span class="ruby-identifier">html_options</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
5:     <span class="ruby-identifier">concat</span>(<span class="ruby-identifier">html</span>)
6:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000230" class="method-detail">
        <a name="M000230"></a>

        <div class="method-heading">
          <a href="#M000230" class="method-signature">
          <span class="method-name">table_tag</span><span class="method-args">(options = {}, html_options = {}, &amp;block)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000230-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000230-source">
<pre>
    <span class="ruby-comment cmt"># File app/helpers/backend/backend_helper.rb, line 44</span>
44:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">table_tag</span>(<span class="ruby-identifier">options</span> = {}, <span class="ruby-identifier">html_options</span> = {}, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
45:     <span class="ruby-identifier">content_tag</span> <span class="ruby-identifier">:table</span> <span class="ruby-keyword kw">do</span>
46:       <span class="ruby-identifier">s</span> = <span class="ruby-value str">&quot;&quot;</span>
47:       <span class="ruby-identifier">s</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">content_tag</span> <span class="ruby-identifier">:tr</span> <span class="ruby-keyword kw">do</span>
48:         <span class="ruby-identifier">r</span> = <span class="ruby-value str">&quot;&quot;</span>
49:         <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:columns</span>].<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">column</span><span class="ruby-operator">|</span>
50:           <span class="ruby-identifier">r</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">content_tag</span> <span class="ruby-identifier">:th</span> <span class="ruby-keyword kw">do</span>
51:             <span class="ruby-identifier">p</span> = <span class="ruby-value str">&quot;&quot;</span>
52:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">column</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Array</span>)
53:               <span class="ruby-identifier">b</span> = (<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:sort</span>] <span class="ruby-operator">==</span> <span class="ruby-node">&quot;#{column[1]}_sort&quot;</span>) <span class="ruby-comment cmt"># TODO 0501 why _sort ??</span>
54:               <span class="ruby-identifier">sort_mode</span> = (<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:sort_mode</span>] <span class="ruby-operator">==</span> <span class="ruby-identifier">:asc</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">:desc</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">:asc</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">b</span>
55:               <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">link_to_remote</span> <span class="ruby-identifier">column</span>[<span class="ruby-value">0</span>],
56:                 <span class="ruby-identifier">:url</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">params</span>.<span class="ruby-identifier">merge</span>({ <span class="ruby-identifier">:sort</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">column</span>[<span class="ruby-value">1</span>], <span class="ruby-identifier">:sort_mode</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">sort_mode</span>, <span class="ruby-identifier">:page</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>}),
57:                 <span class="ruby-identifier">:method</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:get</span>,
58:                 <span class="ruby-identifier">:form</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>,
59:                 <span class="ruby-identifier">:update</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'list_table'</span>
60:               <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">icon_tag</span>(<span class="ruby-value str">&quot;arrow_&quot;</span> <span class="ruby-operator">+</span> (<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:sort_mode</span>] <span class="ruby-operator">==</span> <span class="ruby-identifier">:asc</span> <span class="ruby-operator">?</span> <span class="ruby-value str">&quot;down&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-value str">&quot;up&quot;</span>)) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">b</span>
61:             <span class="ruby-keyword kw">else</span>
62:               <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">column</span>
63:             <span class="ruby-keyword kw">end</span>
64:             <span class="ruby-identifier">p</span>
65:           <span class="ruby-keyword kw">end</span>
66:         <span class="ruby-keyword kw">end</span>
67:         <span class="ruby-identifier">r</span>
68:       <span class="ruby-keyword kw">end</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:columns</span>].<span class="ruby-identifier">blank?</span>
69:   
70:       <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:records</span>].<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">record</span><span class="ruby-operator">|</span>
71:         <span class="ruby-identifier">s</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">capture</span>(<span class="ruby-identifier">record</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
72:       <span class="ruby-keyword kw">end</span>
73:       
74:       <span class="ruby-identifier">s</span>
75:     <span class="ruby-keyword kw">end</span>
76:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000228" class="method-detail">
        <a name="M000228"></a>

        <div class="method-heading">
          <a href="#M000228" class="method-signature">
          <span class="method-name">table_with_search_and_pagination</span><span class="method-args">(options = {}, html_options = {}, &amp;block)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000228-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000228-source">
<pre>
    <span class="ruby-comment cmt"># File app/helpers/backend/backend_helper.rb, line 8</span>
 8:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">table_with_search_and_pagination</span>(<span class="ruby-identifier">options</span> = {}, <span class="ruby-identifier">html_options</span> = {}, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
 9:     <span class="ruby-identifier">html</span> = <span class="ruby-identifier">content_tag</span> <span class="ruby-identifier">:div</span>, <span class="ruby-identifier">:class</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;table-overview&quot;</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'list_table'</span> <span class="ruby-keyword kw">do</span>
10:       <span class="ruby-identifier">r</span> = <span class="ruby-identifier">controller_bar</span>(<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:records</span>], <span class="ruby-keyword kw">true</span>)
11:       <span class="ruby-identifier">r</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">table_tag</span>(<span class="ruby-identifier">options</span>, <span class="ruby-identifier">html_options</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
12:       <span class="ruby-identifier">r</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">controller_bar</span>(<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:records</span>])
13:     <span class="ruby-keyword kw">end</span>
14:     <span class="ruby-identifier">concat</span>(<span class="ruby-identifier">html</span>)
15:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000238" class="method-detail">
        <a name="M000238"></a>

        <div class="method-heading">
          <a href="#M000238" class="method-signature">
          <span class="method-name">time_line</span><span class="method-args">(lines, write_start = true, write_end = true)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000238-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000238-source">
<pre>
     <span class="ruby-comment cmt"># File app/helpers/backend/backend_helper.rb, line 326</span>
326:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">time_line</span>(<span class="ruby-identifier">lines</span>, <span class="ruby-identifier">write_start</span> = <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">write_end</span> = <span class="ruby-keyword kw">true</span>)
327:     <span class="ruby-identifier">html</span> = <span class="ruby-value str">&quot;&quot;</span>
328:     <span class="ruby-identifier">summary</span> = <span class="ruby-value str">&quot;&quot;</span>
329:     
330:     <span class="ruby-identifier">d1</span> = <span class="ruby-constant">Array</span>.<span class="ruby-identifier">new</span>
331:     <span class="ruby-identifier">d2</span> = <span class="ruby-constant">Array</span>.<span class="ruby-identifier">new</span>
332:     <span class="ruby-identifier">unavailable_periods</span> = []
333:       
334:     <span class="ruby-identifier">lines</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">l</span><span class="ruby-operator">|</span>
335:       <span class="ruby-identifier">d1</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">l</span>.<span class="ruby-identifier">start_date</span>
336:       <span class="ruby-identifier">d2</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">l</span>.<span class="ruby-identifier">end_date</span>
337:       <span class="ruby-identifier">unavailable_periods</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">l</span>.<span class="ruby-identifier">model</span>.<span class="ruby-identifier">unavailable_periods_for_document_line</span>(<span class="ruby-identifier">l</span>) <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">l</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">OptionLine</span>)
338:           
339:       <span class="ruby-identifier">summary</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">content_tag</span> <span class="ruby-identifier">:div</span>, <span class="ruby-identifier">:style</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;padding: 1em; border-bottom: 1px solid grey;&quot;</span> <span class="ruby-keyword kw">do</span>
340:         <span class="ruby-node">&quot;Quantity: #{l.quantity} - Model: #{l.model.name}
341:         &lt;br /&gt;
342:         #{dates_with_period(l.start_date, l.end_date)}&quot;</span>
343:       <span class="ruby-keyword kw">end</span>
344:     <span class="ruby-keyword kw">end</span>
345: 
346:     <span class="ruby-identifier">html</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">form_tag</span>( { <span class="ruby-identifier">:lines</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">lines</span> }, <span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;f&quot;</span>, <span class="ruby-identifier">:target=</span><span class="ruby-operator">&gt;</span> <span class="ruby-value str">'_top'</span> )
347:       <span class="ruby-identifier">f</span> = <span class="ruby-identifier">content_tag</span> <span class="ruby-identifier">:table</span> <span class="ruby-keyword kw">do</span>
348:         <span class="ruby-identifier">content_tag</span> <span class="ruby-identifier">:tr</span> <span class="ruby-keyword kw">do</span>
349:           <span class="ruby-identifier">r</span> = <span class="ruby-identifier">content_tag</span> <span class="ruby-identifier">:td</span>, <span class="ruby-identifier">:class</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;date_select&quot;</span> <span class="ruby-keyword kw">do</span>
350:             <span class="ruby-identifier">s</span> = <span class="ruby-identifier">content_tag</span> <span class="ruby-identifier">:b</span> <span class="ruby-keyword kw">do</span>
351:               <span class="ruby-node">&quot;#{_('Start')}: &quot;</span>
352:             <span class="ruby-keyword kw">end</span>
353:             <span class="ruby-identifier">s</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">content_tag</span> <span class="ruby-identifier">:span</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'start_weekday'</span> <span class="ruby-keyword kw">do</span>
354:             <span class="ruby-keyword kw">end</span>
355:             <span class="ruby-identifier">s</span> <span class="ruby-operator">+=</span> <span class="ruby-value str">&quot;&lt;br/&gt;&quot;</span>
356:             <span class="ruby-identifier">s</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">date_select</span> <span class="ruby-identifier">:line</span>, <span class="ruby-identifier">:start_date</span>, { <span class="ruby-identifier">:default</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">d1</span>.<span class="ruby-identifier">min</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-identifier">:day</span>, <span class="ruby-identifier">:month</span>, <span class="ruby-identifier">:year</span>] }, { <span class="ruby-identifier">:onchange</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;validate_date_sequence();&quot;</span>, <span class="ruby-identifier">:disabled</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">write_start</span> }
357:           <span class="ruby-keyword kw">end</span>
358:           <span class="ruby-identifier">r</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">content_tag</span> <span class="ruby-identifier">:td</span>, <span class="ruby-identifier">:class</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;date_select&quot;</span> <span class="ruby-keyword kw">do</span>
359:             <span class="ruby-identifier">s</span> = <span class="ruby-identifier">content_tag</span> <span class="ruby-identifier">:b</span> <span class="ruby-keyword kw">do</span>
360:               <span class="ruby-node">&quot;#{_('End')}: &quot;</span>
361:             <span class="ruby-keyword kw">end</span>
362:             <span class="ruby-identifier">s</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">content_tag</span> <span class="ruby-identifier">:span</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'end_weekday'</span> <span class="ruby-keyword kw">do</span>
363:             <span class="ruby-keyword kw">end</span>
364:             <span class="ruby-identifier">s</span> <span class="ruby-operator">+=</span> <span class="ruby-value str">&quot;&lt;br/&gt;&quot;</span>
365:             <span class="ruby-identifier">s</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">date_select</span> <span class="ruby-identifier">:line</span>, <span class="ruby-identifier">:end_date</span>, { <span class="ruby-identifier">:default</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">d2</span>.<span class="ruby-identifier">max</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-identifier">:day</span>, <span class="ruby-identifier">:month</span>, <span class="ruby-identifier">:year</span>] }, { <span class="ruby-identifier">:onchange</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;validate_date_sequence();&quot;</span>, <span class="ruby-identifier">:disabled</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">write_end</span> }
366:           <span class="ruby-keyword kw">end</span>
367:           <span class="ruby-identifier">r</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">content_tag</span> <span class="ruby-identifier">:td</span>, <span class="ruby-identifier">:class</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'buttons'</span>, <span class="ruby-identifier">:style</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;width: 30%;&quot;</span> <span class="ruby-keyword kw">do</span>
368:             <span class="ruby-identifier">s</span> = <span class="ruby-identifier">submit_button</span> <span class="ruby-identifier">_</span>(<span class="ruby-value str">&quot;Confirm&quot;</span>),
369:                               <span class="ruby-identifier">:icon</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;date_edit&quot;</span>,
370:                               <span class="ruby-identifier">:class</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'negative'</span>,
371:                               <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'submit_button'</span>
372:             <span class="ruby-comment cmt">#old# s += cancel_popup_button _(&quot;Cancel&quot;)</span>
373:             <span class="ruby-identifier">s</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">content_tag</span> <span class="ruby-identifier">:span</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'error_end_before_start'</span>, <span class="ruby-identifier">:style</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'display:none; color: red; font-weight: bold;'</span> <span class="ruby-keyword kw">do</span>
374:               <span class="ruby-identifier">_</span>(<span class="ruby-value str">&quot;Start Date must be before End Date&quot;</span>) <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;&lt;br /&gt;&quot;</span>
375:             <span class="ruby-keyword kw">end</span>
376:             <span class="ruby-identifier">s</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">content_tag</span> <span class="ruby-identifier">:span</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'error_too_early'</span>,        <span class="ruby-identifier">:style</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'display:none; color: red; font-weight: bold;'</span> <span class="ruby-keyword kw">do</span>
377:               <span class="ruby-identifier">_</span>(<span class="ruby-value str">&quot;You can't have a Start Date before today&quot;</span>) <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;&lt;br /&gt;&quot;</span>
378:             <span class="ruby-keyword kw">end</span>
379:           <span class="ruby-keyword kw">end</span>
380:           <span class="ruby-identifier">r</span>
381:         <span class="ruby-keyword kw">end</span>
382:       <span class="ruby-keyword kw">end</span>
383:         
384: <span class="ruby-comment cmt">#      if lines.length == 1 and (lines.first.is_a?(ItemLine) or lines.first.is_a?(OrderLine))</span>
385: <span class="ruby-comment cmt">#        line = lines.first</span>
386:       
387:         <span class="ruby-identifier">f</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">datepicker</span>
388:         
389:         <span class="ruby-identifier">f</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">javascript_tag</span> <span class="ruby-keyword kw">do</span>
390:           <span class="ruby-identifier">j</span> = <span class="ruby-value str">&quot;&quot;</span>
391: <span class="ruby-comment cmt">#temp#</span>
392: <span class="ruby-comment cmt">#          availability = line.model.available_periods_for_document_line(line)</span>
393: <span class="ruby-comment cmt">#          availability.each do |a|</span>
394: <span class="ruby-comment cmt">#            #old# next if a.end_date and a.start_date &gt; a.end_date</span>
395: <span class="ruby-comment cmt">#            if a.end_date.nil?</span>
396: <span class="ruby-comment cmt">#              a.end_date = a.start_date.end_of_month</span>
397: <span class="ruby-comment cmt">#            elsif a.start_date &gt; a.end_date</span>
398: <span class="ruby-comment cmt">#              a.start_date = a.end_date.beginning_of_month</span>
399: <span class="ruby-comment cmt">#            end</span>
400: <span class="ruby-comment cmt">#            d = a.start_date.to_formatted_s(:db)</span>
401: <span class="ruby-comment cmt">#            j += &quot;if($('#{d}')) $('#{d}').innerHTML='#{a.quantity}';&quot;</span>
402: <span class="ruby-comment cmt">#</span>
403: <span class="ruby-comment cmt">#            quantity_color = [[a.quantity, 0].max,5].min # OPTIMIZE max_color should be equal to quantity, then even 2 is green</span>
404: <span class="ruby-comment cmt">#</span>
405: <span class="ruby-comment cmt">#            (a.start_date..a.end_date).each do |d|</span>
406: <span class="ruby-comment cmt">#              d = d.to_formatted_s(:db)</span>
407: <span class="ruby-comment cmt">#              new_class = &quot;available_#{quantity_color}&quot;</span>
408: <span class="ruby-comment cmt">#              new_class += &quot; selectable_date&quot; if quantity_color &gt; 0 # TODO workdays</span>
409: <span class="ruby-comment cmt">#              j += &quot;if($('#{d}')) $('#{d}').addClassName('#{new_class}');&quot;</span>
410: <span class="ruby-comment cmt">#            end</span>
411: <span class="ruby-comment cmt">#          end</span>
412: 
413:           <span class="ruby-identifier">j</span> <span class="ruby-operator">+=</span> <span class="ruby-value str">&quot;$$('.datepicker_date').each(function(element) {
414:                   element.addClassName('selectable_date');
415:                 });&quot;</span>
416: 
417: 
418:           <span class="ruby-identifier">unavailable_periods</span>.<span class="ruby-identifier">sort!</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">u</span><span class="ruby-operator">|</span>
419:             (<span class="ruby-identifier">u</span>.<span class="ruby-identifier">start_date</span><span class="ruby-operator">..</span><span class="ruby-identifier">u</span>.<span class="ruby-identifier">end_date</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">d</span><span class="ruby-operator">|</span>
420:               <span class="ruby-identifier">d</span> = <span class="ruby-identifier">d</span>.<span class="ruby-identifier">to_formatted_s</span>(<span class="ruby-identifier">:db</span>)
421:               <span class="ruby-identifier">j</span> <span class="ruby-operator">+=</span> <span class="ruby-node">&quot;if($('#{d}')){
422:                       $('#{d}').removeClassName('selectable_date');
423:                       $('#{d}').addClassName('available_0');
424:                     }&quot;</span>
425:             <span class="ruby-keyword kw">end</span>
426:           <span class="ruby-keyword kw">end</span>
427:           
428:           <span class="ruby-identifier">j</span> <span class="ruby-operator">+=</span> <span class="ruby-value str">&quot;$$('.selectable_date').each(function(element) {
429:                   element.observe('click', function(event){
430:                     changeDate(event.target.id);
431:                   });
432:                 });&quot;</span>
433:           <span class="ruby-identifier">j</span>
434:         <span class="ruby-keyword kw">end</span>
435:         
436: <span class="ruby-comment cmt">#      end # if 1 line</span>
437: 
438:     <span class="ruby-identifier">html</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">f</span>
439:     <span class="ruby-identifier">html</span> <span class="ruby-operator">+=</span> <span class="ruby-value str">&quot;&lt;/form&gt;&quot;</span>
440:     <span class="ruby-identifier">html</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">summary</span>
441: 
442:     <span class="ruby-identifier">html</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">javascript_tag</span> <span class="ruby-keyword kw">do</span>
443:       <span class="ruby-node">&quot;
444:       Date.prototype.to_formatted_s_db = function () {
445:         y = this.getFullYear();
446:         m = this.getMonth() + 1;
447:         d = this.getDate();
448:         return [y, m &gt; 9 ? m : '0' + m, d &gt; 9 ? d : '0' + d].join('-')
449:       }
450:       
451:       var clicks = 0;
452:       var write_start = #{write_start};
453:       var write_end = #{write_end};
454:       var write_dates = new Array();
455:       if (write_start) write_dates.push('start');
456:       if (write_end) write_dates.push('end');
457:       
458:       function toggle_select_notice(){
459:         if(write_dates.length){
460:           new Effect.Highlight(write_dates[clicks % write_dates.length] + '_weekday');
461:         }
462:       }
463:       
464:       Date.prototype.daystart = function( ){
465:         var _daystart = new Date(this.getTime());
466:         _daystart.setHours(0);
467:         _daystart.setMinutes(0);
468:         _daystart.setSeconds(0);
469:         _daystart.setMilliseconds(0);
470: 
471:         return _daystart;
472:       }
473: 
474:       function validate_date_sequence(){
475:         var today = new Date();
476:         var start_date = new Date($('line_start_date_1i').value, $('line_start_date_2i').value - 1, $('line_start_date_3i').value);
477:         var end_date   = new Date($('line_end_date_1i').value,   $('line_end_date_2i').value   - 1, $('line_end_date_3i').value);
478:         var formatted_start_date = start_date.to_formatted_s_db();
479:         var formatted_end_date = end_date.to_formatted_s_db();
480: 
481:         var weekday = new Array('#{_('Sunday')}','#{_('Monday')}','#{_('Tuesday')}','#{_('Wednesday')}','#{_('Thursday')}','#{_('Friday')}','#{_('Saturday')}')
482:         $('start_weekday').update(weekday[start_date.getDay()]);
483:         $('end_weekday').update(weekday[end_date.getDay()]);
484: 
485:         write_dates.each(function(type){
486:           $$('.selected_date_' + type).each(function(element) {
487:             element.removeClassName('selected_date_' + type);
488:           });
489:         });
490:         if($(formatted_start_date)) $(formatted_start_date).addClassName('selected_date_start');
491:         if($(formatted_end_date)) $(formatted_end_date).addClassName('selected_date_end');
492:         // TODO validate dropdown selection
493: 
494:         if(end_date &lt; start_date){
495:           $('submit_button').hide();
496:           $('error_end_before_start').show();
497:         }else if(#{write_start} &amp;&amp; (start_date &lt; today.daystart()) ){
498:           $('submit_button').hide();
499:           $('error_too_early').show();
500:         }else{
501:           $('submit_button').show();
502:           $('error_end_before_start').hide();
503:           $('error_too_early').hide();
504:         }
505:       }
506:   
507:       
508:       function changeDate(date){
509:         date_array = date.split('-');
510:         
511:         if(write_dates.length){
512:           var type = write_dates[clicks % write_dates.length];
513:           
514:           $('line_' + type + '_date_1i').value = parseInt(date_array[0], 10);
515:           $('line_' + type + '_date_2i').value = parseInt(date_array[1], 10);
516:           $('line_' + type + '_date_3i').value = parseInt(date_array[2], 10);
517:           
518:           clicks++;
519:           toggle_select_notice();
520:           validate_date_sequence();
521:         }
522:       }
523:       
524:       toggle_select_notice();
525:       validate_date_sequence();
526:       &quot;</span>
527:     <span class="ruby-keyword kw">end</span>
528:     
529:     <span class="ruby-identifier">html</span>
530:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>