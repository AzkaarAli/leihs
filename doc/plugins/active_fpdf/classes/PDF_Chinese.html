<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Module: PDF_Chinese</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href=".././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Module</strong></td>
          <td class="class-name-in-header">PDF_Chinese</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../files/vendor/plugins/active_fpdf/lib/chinese_rb.html">
                vendor/plugins/active_fpdf/lib/chinese.rb
                </a>
        <br />
            </td>
        </tr>

        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <p>
Chinese support ported by Brian Ollenberger from Oliver Plathey&#8216;s
Chinese PDF support.
</p>
<p>
First added in 1.53b
</p>
<p>
This is currently totally untested. Please let me know if you run into any
bugs.
</p>
<p>
Usage is as follows:
</p>
<p>
require &#8216;fpdf&#8217; require &#8216;chinese&#8217; pdf = <a
href="FPDF.html#M000009">FPDF.new</a> pdf.extend(PDF_Chinese)
</p>
<p>
This allows it to be combined with other extensions, such as the bookmark
module.
</p>

    </div>


   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000063">AddBig5Font</a>&nbsp;&nbsp;
      <a href="#M000064">AddBig5hwFont</a>&nbsp;&nbsp;
      <a href="#M000061">AddCIDFont</a>&nbsp;&nbsp;
      <a href="#M000062">AddCIDFonts</a>&nbsp;&nbsp;
      <a href="#M000065">AddGBFont</a>&nbsp;&nbsp;
      <a href="#M000066">AddGBhwFont</a>&nbsp;&nbsp;
      <a href="#M000068">GetMBStringWidth</a>&nbsp;&nbsp;
      <a href="#M000067">GetStringWidth</a>&nbsp;&nbsp;
      <a href="#M000070">MBMultiCell</a>&nbsp;&nbsp;
      <a href="#M000072">MBWrite</a>&nbsp;&nbsp;
      <a href="#M000069">MultiCell</a>&nbsp;&nbsp;
      <a href="#M000071">Write</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">


    <div id="constants-list">
      <h3 class="section-bar">Constants</h3>

      <div class="name-list">
        <table summary="Constants">
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">Big5_widths</td>
          <td>=</td>
          <td class="context-item-value">{' '=&gt;250,'!'=&gt;250,'&quot;'=&gt;408,'#'=&gt;668,'$'=&gt;490,'%'=&gt;875,'&amp;'=&gt;698,'\''=&gt;250,         '('=&gt;240,')'=&gt;240,'*'=&gt;417,'+'=&gt;667,','=&gt;250,'-'=&gt;313,'.'=&gt;250,'/'=&gt;520,'0'=&gt;500,'1'=&gt;500,         '2'=&gt;500,'3'=&gt;500,'4'=&gt;500,'5'=&gt;500,'6'=&gt;500,'7'=&gt;500,'8'=&gt;500,'9'=&gt;500,':'=&gt;250,';'=&gt;250,         '&lt;'=&gt;667,'='=&gt;667,'&gt;'=&gt;667,'?'=&gt;396,'@'=&gt;921,'A'=&gt;677,'B'=&gt;615,'C'=&gt;719,'D'=&gt;760,'E'=&gt;625,         'F'=&gt;552,'G'=&gt;771,'H'=&gt;802,'I'=&gt;354,'J'=&gt;354,'K'=&gt;781,'L'=&gt;604,'M'=&gt;927,'N'=&gt;750,'O'=&gt;823,         'P'=&gt;563,'Q'=&gt;823,'R'=&gt;729,'S'=&gt;542,'T'=&gt;698,'U'=&gt;771,'V'=&gt;729,'W'=&gt;948,'X'=&gt;771,'Y'=&gt;677,         'Z'=&gt;635,'['=&gt;344,'\\'=&gt;520,']'=&gt;344,'^'=&gt;469,'_'=&gt;500,'`'=&gt;250,'a'=&gt;469,'b'=&gt;521,'c'=&gt;427,         'd'=&gt;521,'e'=&gt;438,'f'=&gt;271,'g'=&gt;469,'h'=&gt;531,'i'=&gt;250,'j'=&gt;250,'k'=&gt;458,'l'=&gt;240,'m'=&gt;802,         'n'=&gt;531,'o'=&gt;500,'p'=&gt;521,'q'=&gt;521,'r'=&gt;365,'s'=&gt;333,'t'=&gt;292,'u'=&gt;521,'v'=&gt;458,'w'=&gt;677,         'x'=&gt;479,'y'=&gt;458,'z'=&gt;427,'{'=&gt;480,'|'=&gt;496,'}'=&gt;480,'~'=&gt;667}</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">GB_widths</td>
          <td>=</td>
          <td class="context-item-value">{' '=&gt;207,'!'=&gt;270,'&quot;'=&gt;342,'#'=&gt;467,'$'=&gt;462,'%'=&gt;797,'&amp;'=&gt;710,'\''=&gt;239,         '('=&gt;374,')'=&gt;374,'*'=&gt;423,'+'=&gt;605,','=&gt;238,'-'=&gt;375,'.'=&gt;238,'/'=&gt;334,'0'=&gt;462,'1'=&gt;462,         '2'=&gt;462,'3'=&gt;462,'4'=&gt;462,'5'=&gt;462,'6'=&gt;462,'7'=&gt;462,'8'=&gt;462,'9'=&gt;462,':'=&gt;238,';'=&gt;238,         '&lt;'=&gt;605,'='=&gt;605,'&gt;'=&gt;605,'?'=&gt;344,'@'=&gt;748,'A'=&gt;684,'B'=&gt;560,'C'=&gt;695,'D'=&gt;739,'E'=&gt;563,         'F'=&gt;511,'G'=&gt;729,'H'=&gt;793,'I'=&gt;318,'J'=&gt;312,'K'=&gt;666,'L'=&gt;526,'M'=&gt;896,'N'=&gt;758,'O'=&gt;772,         'P'=&gt;544,'Q'=&gt;772,'R'=&gt;628,'S'=&gt;465,'T'=&gt;607,'U'=&gt;753,'V'=&gt;711,'W'=&gt;972,'X'=&gt;647,'Y'=&gt;620,         'Z'=&gt;607,'['=&gt;374,'\\'=&gt;333,']'=&gt;374,'^'=&gt;606,'_'=&gt;500,'`'=&gt;239,'a'=&gt;417,'b'=&gt;503,'c'=&gt;427,         'd'=&gt;529,'e'=&gt;415,'f'=&gt;264,'g'=&gt;444,'h'=&gt;518,'i'=&gt;241,'j'=&gt;230,'k'=&gt;495,'l'=&gt;228,'m'=&gt;793,         'n'=&gt;527,'o'=&gt;524,'p'=&gt;524,'q'=&gt;504,'r'=&gt;338,'s'=&gt;336,'t'=&gt;277,'u'=&gt;517,'v'=&gt;450,'w'=&gt;652,         'x'=&gt;466,'y'=&gt;452,'z'=&gt;407,'{'=&gt;370,'|'=&gt;258,'}'=&gt;370,'~'=&gt;605}</td>
        </tr>
        </table>
      </div>
    </div>



      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M000063" class="method-detail">
        <a name="M000063"></a>

        <div class="method-heading">
          <a href="#M000063" class="method-signature">
          <span class="method-name">AddBig5Font</span><span class="method-args">(family='Big5',name='MSungStd-Light-Acro')</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000063-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000063-source">
<pre>
    <span class="ruby-comment cmt"># File vendor/plugins/active_fpdf/lib/chinese.rb, line 59</span>
59:     <span class="ruby-keyword kw">def</span> <span class="ruby-constant">AddBig5Font</span>(<span class="ruby-identifier">family</span>=<span class="ruby-value str">'Big5'</span>,<span class="ruby-identifier">name</span>=<span class="ruby-value str">'MSungStd-Light-Acro'</span>)
60:         <span class="ruby-comment cmt"># Add Big5 font with proportional Latin</span>
61:         <span class="ruby-identifier">cw</span>=<span class="ruby-constant">Big5_widths</span>
62:         <span class="ruby-identifier">cMap</span>=<span class="ruby-value str">'ETenms-B5-H'</span>
63:         <span class="ruby-identifier">registry</span>={<span class="ruby-value str">'ordering'</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">'CNS1'</span>,<span class="ruby-value str">'supplement'</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value">0</span>}
64:         <span class="ruby-constant">AddCIDFonts</span>(<span class="ruby-identifier">family</span>,<span class="ruby-identifier">name</span>,<span class="ruby-identifier">cw</span>,<span class="ruby-identifier">cMap</span>,<span class="ruby-identifier">registry</span>)
65:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000064" class="method-detail">
        <a name="M000064"></a>

        <div class="method-heading">
          <a href="#M000064" class="method-signature">
          <span class="method-name">AddBig5hwFont</span><span class="method-args">(family='Big5-hw',name='MSungStd-Light-Acro')</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000064-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000064-source">
<pre>
    <span class="ruby-comment cmt"># File vendor/plugins/active_fpdf/lib/chinese.rb, line 67</span>
67:     <span class="ruby-keyword kw">def</span> <span class="ruby-constant">AddBig5hwFont</span>(<span class="ruby-identifier">family</span>=<span class="ruby-value str">'Big5-hw'</span>,<span class="ruby-identifier">name</span>=<span class="ruby-value str">'MSungStd-Light-Acro'</span>)
68:         <span class="ruby-comment cmt"># Add Big5 font with half-width Latin</span>
69:         <span class="ruby-identifier">cw</span> = {}
70:         <span class="ruby-value">32</span>.<span class="ruby-identifier">upto</span>(<span class="ruby-value">126</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span>
71:             <span class="ruby-identifier">cw</span>[<span class="ruby-identifier">i</span>.<span class="ruby-identifier">chr</span>]=<span class="ruby-value">500</span>
72:         <span class="ruby-keyword kw">end</span>
73:         <span class="ruby-identifier">cMap</span>=<span class="ruby-value str">'ETen-B5-H'</span>
74:         <span class="ruby-identifier">registry</span>={<span class="ruby-value str">'ordering'</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">'CNS1'</span>,<span class="ruby-value str">'supplement'</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value">0</span>}
75:         <span class="ruby-constant">AddCIDFonts</span>(<span class="ruby-identifier">family</span>,<span class="ruby-identifier">name</span>,<span class="ruby-identifier">cw</span>,<span class="ruby-identifier">cMap</span>,<span class="ruby-identifier">registry</span>)
76:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000061" class="method-detail">
        <a name="M000061"></a>

        <div class="method-heading">
          <a href="#M000061" class="method-signature">
          <span class="method-name">AddCIDFont</span><span class="method-args">(family,style,name,cw,cMap,registry)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000061-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000061-source">
<pre>
    <span class="ruby-comment cmt"># File vendor/plugins/active_fpdf/lib/chinese.rb, line 41</span>
41:     <span class="ruby-keyword kw">def</span> <span class="ruby-constant">AddCIDFont</span>(<span class="ruby-identifier">family</span>,<span class="ruby-identifier">style</span>,<span class="ruby-identifier">name</span>,<span class="ruby-identifier">cw</span>,<span class="ruby-identifier">cMap</span>,<span class="ruby-identifier">registry</span>)
42:         <span class="ruby-identifier">fontkey</span>=<span class="ruby-identifier">family</span>.<span class="ruby-identifier">downcase</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">style</span>.<span class="ruby-identifier">upcase</span>;
43:         <span class="ruby-keyword kw">unless</span> <span class="ruby-ivar">@fonts</span>[<span class="ruby-identifier">fontkey</span>].<span class="ruby-identifier">nil?</span>
44:             <span class="ruby-constant">Error</span>(<span class="ruby-node">&quot;Font already added: #{family} #{style}&quot;</span>)
45:         <span class="ruby-keyword kw">end</span>
46:         <span class="ruby-identifier">i</span>=<span class="ruby-ivar">@fonts</span>.<span class="ruby-identifier">length</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
47:         <span class="ruby-identifier">name</span>.<span class="ruby-identifier">sub!</span>(<span class="ruby-value str">' '</span>, <span class="ruby-value str">''</span>)
48:         <span class="ruby-ivar">@fonts</span>[<span class="ruby-identifier">fontkey</span>]={<span class="ruby-value str">'i'</span>=<span class="ruby-operator">&gt;</span><span class="ruby-identifier">i</span>,<span class="ruby-value str">'type'</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">'Type0'</span>,<span class="ruby-value str">'name'</span>=<span class="ruby-operator">&gt;</span><span class="ruby-identifier">name</span>,<span class="ruby-value str">'up'</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value">-130</span>,
49:             <span class="ruby-value str">'ut'</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value">40</span>,<span class="ruby-value str">'cw'</span>=<span class="ruby-operator">&gt;</span><span class="ruby-identifier">cw</span>,<span class="ruby-value str">'CMap'</span>=<span class="ruby-operator">&gt;</span><span class="ruby-identifier">cMap</span>,<span class="ruby-value str">'registry'</span>=<span class="ruby-operator">&gt;</span><span class="ruby-identifier">registry</span>}
50:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000062" class="method-detail">
        <a name="M000062"></a>

        <div class="method-heading">
          <a href="#M000062" class="method-signature">
          <span class="method-name">AddCIDFonts</span><span class="method-args">(family,name,cw,cMap,registry)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000062-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000062-source">
<pre>
    <span class="ruby-comment cmt"># File vendor/plugins/active_fpdf/lib/chinese.rb, line 52</span>
52:     <span class="ruby-keyword kw">def</span> <span class="ruby-constant">AddCIDFonts</span>(<span class="ruby-identifier">family</span>,<span class="ruby-identifier">name</span>,<span class="ruby-identifier">cw</span>,<span class="ruby-identifier">cMap</span>,<span class="ruby-identifier">registry</span>)
53:         <span class="ruby-constant">AddCIDFont</span>(<span class="ruby-identifier">family</span>,<span class="ruby-value str">''</span>,<span class="ruby-identifier">name</span>,<span class="ruby-identifier">cw</span>,<span class="ruby-identifier">cMap</span>,<span class="ruby-identifier">registry</span>)
54:         <span class="ruby-constant">AddCIDFont</span>(<span class="ruby-identifier">family</span>,<span class="ruby-value str">'B'</span>,<span class="ruby-identifier">name</span><span class="ruby-operator">+</span><span class="ruby-value str">',Bold'</span>,<span class="ruby-identifier">cw</span>,<span class="ruby-identifier">cMap</span>,<span class="ruby-identifier">registry</span>)
55:         <span class="ruby-constant">AddCIDFont</span>(<span class="ruby-identifier">family</span>,<span class="ruby-value str">'I'</span>,<span class="ruby-identifier">name</span><span class="ruby-operator">+</span><span class="ruby-value str">',Italic'</span>,<span class="ruby-identifier">cw</span>,<span class="ruby-identifier">cMap</span>,<span class="ruby-identifier">registry</span>)
56:         <span class="ruby-constant">AddCIDFont</span>(<span class="ruby-identifier">family</span>,<span class="ruby-value str">'BI'</span>,<span class="ruby-identifier">name</span><span class="ruby-operator">+</span><span class="ruby-value str">',BoldItalic'</span>,<span class="ruby-identifier">cw</span>,<span class="ruby-identifier">cMap</span>,<span class="ruby-identifier">registry</span>)
57:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000065" class="method-detail">
        <a name="M000065"></a>

        <div class="method-heading">
          <a href="#M000065" class="method-signature">
          <span class="method-name">AddGBFont</span><span class="method-args">(family='GB',name='STSongStd-Light-Acro')</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000065-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000065-source">
<pre>
    <span class="ruby-comment cmt"># File vendor/plugins/active_fpdf/lib/chinese.rb, line 78</span>
78:     <span class="ruby-keyword kw">def</span> <span class="ruby-constant">AddGBFont</span>(<span class="ruby-identifier">family</span>=<span class="ruby-value str">'GB'</span>,<span class="ruby-identifier">name</span>=<span class="ruby-value str">'STSongStd-Light-Acro'</span>)
79:         <span class="ruby-comment cmt"># Add GB font with proportional Latin</span>
80:         <span class="ruby-identifier">cw</span>=<span class="ruby-constant">GB_widths</span>
81:         <span class="ruby-identifier">cMap</span>=<span class="ruby-value str">'GBKp-EUC-H'</span>
82:         <span class="ruby-identifier">registry</span>={<span class="ruby-value str">'ordering'</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">'GB1'</span>,<span class="ruby-value str">'supplement'</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value">2</span>}
83:         <span class="ruby-constant">AddCIDFonts</span>(<span class="ruby-identifier">family</span>,<span class="ruby-identifier">name</span>,<span class="ruby-identifier">cw</span>,<span class="ruby-identifier">cMap</span>,<span class="ruby-identifier">registry</span>)
84:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000066" class="method-detail">
        <a name="M000066"></a>

        <div class="method-heading">
          <a href="#M000066" class="method-signature">
          <span class="method-name">AddGBhwFont</span><span class="method-args">(family='GB-hw',name='STSongStd-Light-Acro')</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000066-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000066-source">
<pre>
    <span class="ruby-comment cmt"># File vendor/plugins/active_fpdf/lib/chinese.rb, line 86</span>
86:     <span class="ruby-keyword kw">def</span> <span class="ruby-constant">AddGBhwFont</span>(<span class="ruby-identifier">family</span>=<span class="ruby-value str">'GB-hw'</span>,<span class="ruby-identifier">name</span>=<span class="ruby-value str">'STSongStd-Light-Acro'</span>)
87:         <span class="ruby-comment cmt"># Add GB font with half-width Latin</span>
88:         <span class="ruby-value">32</span>.<span class="ruby-identifier">upto</span>(<span class="ruby-value">126</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span>
89:             <span class="ruby-identifier">cw</span>[<span class="ruby-identifier">i</span>.<span class="ruby-identifier">chr</span>]=<span class="ruby-value">500</span>
90:         <span class="ruby-keyword kw">end</span>
91:         <span class="ruby-identifier">cMap</span>=<span class="ruby-value str">'GBK-EUC-H'</span>
92:         <span class="ruby-identifier">registry</span>={<span class="ruby-value str">'ordering'</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">'GB1'</span>,<span class="ruby-value str">'supplement'</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value">2</span>}
93:         <span class="ruby-constant">AddCIDFonts</span>(<span class="ruby-identifier">family</span>,<span class="ruby-identifier">name</span>,<span class="ruby-identifier">cw</span>,<span class="ruby-identifier">cMap</span>,<span class="ruby-identifier">registry</span>)
94:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000068" class="method-detail">
        <a name="M000068"></a>

        <div class="method-heading">
          <a href="#M000068" class="method-signature">
          <span class="method-name">GetMBStringWidth</span><span class="method-args">(s)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000068-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000068-source">
<pre>
     <span class="ruby-comment cmt"># File vendor/plugins/active_fpdf/lib/chinese.rb, line 104</span>
104:     <span class="ruby-keyword kw">def</span> <span class="ruby-constant">GetMBStringWidth</span>(<span class="ruby-identifier">s</span>)
105:         <span class="ruby-comment cmt"># Multi-byte version of GetStringWidth()</span>
106:         <span class="ruby-identifier">l</span>=<span class="ruby-value">0</span>
107:         <span class="ruby-identifier">cw</span>=<span class="ruby-ivar">@CurrentFont</span>[<span class="ruby-value str">'cw'</span>]
108:         <span class="ruby-identifier">nb</span>=<span class="ruby-identifier">s</span>.<span class="ruby-identifier">length</span>
109:         <span class="ruby-identifier">i</span>=<span class="ruby-value">0</span>
110:         <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">i</span><span class="ruby-operator">&lt;</span><span class="ruby-identifier">nb</span>
111:             <span class="ruby-identifier">c</span>=<span class="ruby-identifier">s</span>[<span class="ruby-identifier">i</span>]
112:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">ord</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">128</span>
113:                 <span class="ruby-identifier">l</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">cw</span>[<span class="ruby-identifier">c</span>]
114:                 <span class="ruby-identifier">i</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
115:             <span class="ruby-keyword kw">else</span>
116:                 <span class="ruby-identifier">l</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1000</span>
117:                 <span class="ruby-identifier">i</span> <span class="ruby-operator">+=</span> <span class="ruby-value">2</span>
118:             <span class="ruby-keyword kw">end</span>
119:         <span class="ruby-keyword kw">end</span>
120:         <span class="ruby-identifier">l</span><span class="ruby-operator">*</span><span class="ruby-ivar">@FontSize</span><span class="ruby-operator">/</span><span class="ruby-value">1000</span>
121:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000067" class="method-detail">
        <a name="M000067"></a>

        <div class="method-heading">
          <a href="#M000067" class="method-signature">
          <span class="method-name">GetStringWidth</span><span class="method-args">(s)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000067-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000067-source">
<pre>
     <span class="ruby-comment cmt"># File vendor/plugins/active_fpdf/lib/chinese.rb, line 96</span>
 96:     <span class="ruby-keyword kw">def</span> <span class="ruby-constant">GetStringWidth</span>(<span class="ruby-identifier">s</span>)
 97:         <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@CurrentFont</span>[<span class="ruby-value str">'type'</span>]<span class="ruby-operator">==</span><span class="ruby-value str">'Type0'</span>
 98:             <span class="ruby-constant">GetMBStringWidth</span>(<span class="ruby-identifier">s</span>)
 99:         <span class="ruby-keyword kw">else</span>
100:             <span class="ruby-keyword kw">super</span>(<span class="ruby-identifier">s</span>)
101:         <span class="ruby-keyword kw">end</span>
102:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000070" class="method-detail">
        <a name="M000070"></a>

        <div class="method-heading">
          <a href="#M000070" class="method-signature">
          <span class="method-name">MBMultiCell</span><span class="method-args">(w,h,txt,border=0,align='L',fill=0)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000070-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000070-source">
<pre>
     <span class="ruby-comment cmt"># File vendor/plugins/active_fpdf/lib/chinese.rb, line 131</span>
131:     <span class="ruby-keyword kw">def</span> <span class="ruby-constant">MBMultiCell</span>(<span class="ruby-identifier">w</span>,<span class="ruby-identifier">h</span>,<span class="ruby-identifier">txt</span>,<span class="ruby-identifier">border</span>=<span class="ruby-value">0</span>,<span class="ruby-identifier">align</span>=<span class="ruby-value str">'L'</span>,<span class="ruby-identifier">fill</span>=<span class="ruby-value">0</span>)
132:         <span class="ruby-comment cmt"># Multi-byte version of MultiCell()</span>
133:         <span class="ruby-identifier">cw</span>=<span class="ruby-ivar">@CurrentFont</span>[<span class="ruby-value str">'cw'</span>]
134:         <span class="ruby-identifier">w</span>=<span class="ruby-ivar">@w</span><span class="ruby-operator">-</span><span class="ruby-ivar">@rMargin</span><span class="ruby-operator">-</span><span class="ruby-ivar">@x</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">w</span><span class="ruby-operator">==</span><span class="ruby-value">0</span>
135:         <span class="ruby-identifier">wmax</span>=(<span class="ruby-identifier">w</span><span class="ruby-operator">-</span><span class="ruby-value">2</span><span class="ruby-operator">*</span><span class="ruby-ivar">@cMargin</span>)<span class="ruby-operator">*</span><span class="ruby-value">1000</span><span class="ruby-operator">/</span><span class="ruby-ivar">@FontSize</span>
136:         <span class="ruby-identifier">s</span>=<span class="ruby-identifier">txt</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-value str">&quot;\r&quot;</span>, <span class="ruby-value str">''</span>)
137:         <span class="ruby-identifier">nb</span>=<span class="ruby-identifier">s</span>.<span class="ruby-identifier">length</span>
138:         <span class="ruby-identifier">nb</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">nb</span><span class="ruby-operator">&gt;</span><span class="ruby-value">0</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">s</span>[<span class="ruby-identifier">nb</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>]<span class="ruby-operator">==</span><span class="ruby-value str">&quot;\n&quot;</span>
139:         <span class="ruby-identifier">b</span>=<span class="ruby-value">0</span>
140:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">border</span>
141:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">border</span><span class="ruby-operator">==</span><span class="ruby-value">1</span>
142:                 <span class="ruby-identifier">border</span>=<span class="ruby-value str">'LTRB'</span>
143:                 <span class="ruby-identifier">b</span>=<span class="ruby-value str">'LRT'</span>
144:                 <span class="ruby-identifier">b2</span>=<span class="ruby-value str">'LR'</span>
145:             <span class="ruby-keyword kw">else</span>
146:                 <span class="ruby-identifier">b2</span>=<span class="ruby-value str">''</span>
147:                 <span class="ruby-identifier">b2</span><span class="ruby-operator">+=</span><span class="ruby-value str">'L'</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">border</span>.<span class="ruby-identifier">index</span>(<span class="ruby-value str">'L'</span>).<span class="ruby-identifier">nil?</span>
148:                 <span class="ruby-identifier">b2</span><span class="ruby-operator">+=</span><span class="ruby-value str">'R'</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">border</span>.<span class="ruby-identifier">index</span>(<span class="ruby-value str">'R'</span>).<span class="ruby-identifier">nil?</span> 
149:                 <span class="ruby-identifier">b</span> = (<span class="ruby-identifier">border</span>.<span class="ruby-identifier">index</span>(<span class="ruby-value str">'T'</span>)) <span class="ruby-operator">?</span> (<span class="ruby-identifier">b2</span><span class="ruby-operator">+</span><span class="ruby-value str">'T'</span>) <span class="ruby-operator">:</span> <span class="ruby-identifier">b2</span>
150:             <span class="ruby-keyword kw">end</span>
151:         <span class="ruby-keyword kw">end</span>
152:         <span class="ruby-identifier">sep</span>=<span class="ruby-value">-1</span>
153:         <span class="ruby-identifier">i</span>=<span class="ruby-value">0</span>
154:         <span class="ruby-identifier">j</span>=<span class="ruby-value">0</span>
155:         <span class="ruby-identifier">l</span>=<span class="ruby-value">0</span>
156:         <span class="ruby-identifier">nl</span>=<span class="ruby-value">1</span>
157:         <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">i</span><span class="ruby-operator">&lt;</span><span class="ruby-identifier">nb</span>
158:             <span class="ruby-comment cmt"># Get next character</span>
159:             <span class="ruby-identifier">c</span>=<span class="ruby-identifier">s</span>[<span class="ruby-identifier">i</span>]
160:             <span class="ruby-comment cmt"># Check if ASCII or MB</span>
161:             <span class="ruby-identifier">ascii</span> = <span class="ruby-keyword kw">false</span>
162:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">c</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">128</span>
163:                 <span class="ruby-identifier">ascii</span> = <span class="ruby-keyword kw">true</span>
164:             <span class="ruby-keyword kw">end</span>
165:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">chr</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;\n&quot;</span>
166:                 <span class="ruby-comment cmt"># Explicit line break</span>
167:                 <span class="ruby-constant">Cell</span>(<span class="ruby-identifier">w</span>,<span class="ruby-identifier">h</span>,<span class="ruby-identifier">s</span>[<span class="ruby-identifier">j</span><span class="ruby-operator">..</span><span class="ruby-identifier">i</span><span class="ruby-operator">-</span><span class="ruby-identifier">j</span>],<span class="ruby-identifier">b</span>,<span class="ruby-value">2</span>,<span class="ruby-identifier">align</span>,<span class="ruby-identifier">fill</span>)
168:                 <span class="ruby-identifier">i</span><span class="ruby-operator">+=</span><span class="ruby-value">1</span>
169:                 <span class="ruby-identifier">sep</span>=<span class="ruby-value">-1</span>
170:                 <span class="ruby-identifier">j</span>=<span class="ruby-identifier">i</span>
171:                 <span class="ruby-identifier">l</span>=<span class="ruby-value">0</span>
172:                 <span class="ruby-identifier">nl</span><span class="ruby-operator">+=</span><span class="ruby-value">1</span>
173:                 <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">border</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">nl</span><span class="ruby-operator">==</span><span class="ruby-value">2</span>
174:                     <span class="ruby-identifier">b</span>=<span class="ruby-identifier">b2</span>
175:                 <span class="ruby-keyword kw">end</span>
176:                 <span class="ruby-keyword kw">next</span>
177:             <span class="ruby-keyword kw">end</span>
178:             <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">not</span> <span class="ruby-identifier">ascii</span>
179:                 <span class="ruby-identifier">sep</span>=<span class="ruby-identifier">i</span>
180:                 <span class="ruby-identifier">ls</span>=<span class="ruby-identifier">l</span>
181:             <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">chr</span><span class="ruby-operator">==</span><span class="ruby-value str">' '</span>
182:                 <span class="ruby-identifier">sep</span>=<span class="ruby-identifier">i</span>
183:                 <span class="ruby-identifier">ls</span>=<span class="ruby-identifier">l</span>
184:             <span class="ruby-keyword kw">end</span>
185:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">ascii</span>
186:                 <span class="ruby-identifier">l</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">cw</span>[<span class="ruby-identifier">c</span>.<span class="ruby-identifier">chr</span>]
187:             <span class="ruby-keyword kw">else</span>
188:                 <span class="ruby-identifier">l</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1000</span>
189:             <span class="ruby-keyword kw">end</span>
190:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">l</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">wmax</span>
191:                 <span class="ruby-comment cmt"># Automatic line break</span>
192:                 <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">sep</span><span class="ruby-operator">==</span><span class="ruby-value">-1</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">i</span><span class="ruby-operator">==</span><span class="ruby-identifier">j</span>
193:                     <span class="ruby-identifier">i</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">ascii</span> <span class="ruby-value">? </span><span class="ruby-value">1</span> <span class="ruby-operator">:</span> <span class="ruby-value">2</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">i</span><span class="ruby-operator">==</span><span class="ruby-identifier">j</span>
194:                     <span class="ruby-constant">Cell</span>(<span class="ruby-identifier">w</span>,<span class="ruby-identifier">h</span>,<span class="ruby-identifier">s</span>[<span class="ruby-identifier">j</span><span class="ruby-operator">..</span><span class="ruby-identifier">i</span><span class="ruby-operator">-</span><span class="ruby-identifier">j</span>],<span class="ruby-identifier">b</span>,<span class="ruby-value">2</span>,<span class="ruby-identifier">align</span>,<span class="ruby-identifier">fill</span>)
195:                 <span class="ruby-keyword kw">else</span>
196:                     <span class="ruby-constant">Cell</span>(<span class="ruby-identifier">w</span>,<span class="ruby-identifier">h</span>,<span class="ruby-identifier">s</span>[<span class="ruby-identifier">j</span><span class="ruby-operator">..</span><span class="ruby-identifier">sep</span><span class="ruby-operator">-</span><span class="ruby-identifier">j</span>],<span class="ruby-identifier">b</span>,<span class="ruby-value">2</span>,<span class="ruby-identifier">align</span>,<span class="ruby-identifier">fill</span>)
197:                     <span class="ruby-identifier">i</span>=(<span class="ruby-identifier">s</span>[<span class="ruby-identifier">sep</span>]<span class="ruby-operator">==</span><span class="ruby-value str">' '</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">sep</span><span class="ruby-operator">+</span><span class="ruby-value">1</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">sep</span>
198:                 <span class="ruby-keyword kw">end</span>
199:                 <span class="ruby-identifier">sep</span>=<span class="ruby-value">-1</span>
200:                 <span class="ruby-identifier">j</span>=<span class="ruby-identifier">i</span>
201:                 <span class="ruby-identifier">l</span>=<span class="ruby-value">0</span>
202:                 <span class="ruby-identifier">nl</span><span class="ruby-operator">+=</span><span class="ruby-value">1</span>
203:                 <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">border</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">nl</span><span class="ruby-operator">==</span><span class="ruby-value">2</span>
204:                     <span class="ruby-identifier">b</span>=<span class="ruby-identifier">b2</span>
205:                 <span class="ruby-keyword kw">end</span>
206:             <span class="ruby-keyword kw">else</span>
207:                 <span class="ruby-identifier">i</span><span class="ruby-operator">+=</span><span class="ruby-identifier">$ascii</span> <span class="ruby-operator">?</span> <span class="ruby-value">1</span> <span class="ruby-operator">:</span> <span class="ruby-value">2</span>
208:             <span class="ruby-keyword kw">end</span>
209:         <span class="ruby-keyword kw">end</span>
210: 
211:         <span class="ruby-comment cmt"># Last chunk</span>
212:         <span class="ruby-identifier">b</span> <span class="ruby-operator">+=</span> <span class="ruby-value str">'B'</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">border</span> <span class="ruby-keyword kw">and</span> <span class="ruby-keyword kw">not</span> <span class="ruby-identifier">border</span>.<span class="ruby-identifier">index</span>(<span class="ruby-value str">'B'</span>).<span class="ruby-identifier">nil?</span>
213:         <span class="ruby-constant">Cell</span>(<span class="ruby-identifier">w</span>,<span class="ruby-identifier">h</span>,<span class="ruby-identifier">s</span>[<span class="ruby-identifier">i</span><span class="ruby-operator">..</span><span class="ruby-identifier">i</span><span class="ruby-operator">-</span><span class="ruby-identifier">j</span>],<span class="ruby-identifier">b</span>,<span class="ruby-value">2</span>,<span class="ruby-identifier">align</span>,<span class="ruby-identifier">fill</span>)
214:         <span class="ruby-ivar">@x</span>=<span class="ruby-ivar">@lMargin</span>
215:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000072" class="method-detail">
        <a name="M000072"></a>

        <div class="method-heading">
          <a href="#M000072" class="method-signature">
          <span class="method-name">MBWrite</span><span class="method-args">(h,txt,link)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000072-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000072-source">
<pre>
     <span class="ruby-comment cmt"># File vendor/plugins/active_fpdf/lib/chinese.rb, line 225</span>
225:     <span class="ruby-keyword kw">def</span> <span class="ruby-constant">MBWrite</span>(<span class="ruby-identifier">h</span>,<span class="ruby-identifier">txt</span>,<span class="ruby-identifier">link</span>)
226:         <span class="ruby-comment cmt"># Multi-byte version of Write()</span>
227:         <span class="ruby-identifier">cw</span>=<span class="ruby-ivar">@CurrentFont</span>[<span class="ruby-value str">'cw'</span>]
228:         <span class="ruby-identifier">w</span>=<span class="ruby-ivar">@w</span><span class="ruby-operator">-</span><span class="ruby-ivar">@rMargin</span><span class="ruby-operator">-</span><span class="ruby-ivar">@x</span>
229:         <span class="ruby-identifier">wmax</span>=(<span class="ruby-identifier">w</span><span class="ruby-operator">-</span><span class="ruby-value">2</span><span class="ruby-operator">*</span><span class="ruby-ivar">@cMargin</span>)<span class="ruby-operator">*</span><span class="ruby-value">1000</span><span class="ruby-operator">/</span><span class="ruby-ivar">@FontSize</span>
230:         <span class="ruby-identifier">s</span>=<span class="ruby-identifier">txt</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-value str">&quot;\r&quot;</span>, <span class="ruby-value str">' '</span>)
231:         <span class="ruby-identifier">nb</span>=<span class="ruby-identifier">s</span>.<span class="ruby-identifier">length</span>
232:         <span class="ruby-identifier">sep</span>=<span class="ruby-value">-1</span>
233:         <span class="ruby-identifier">i</span>=<span class="ruby-value">0</span>
234:         <span class="ruby-identifier">j</span>=<span class="ruby-value">0</span>
235:         <span class="ruby-identifier">l</span>=<span class="ruby-value">0</span> 
236:         <span class="ruby-identifier">nl</span>=<span class="ruby-value">1</span>
237:         <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">i</span><span class="ruby-operator">&lt;</span><span class="ruby-identifier">nb</span>
238:             <span class="ruby-comment cmt"># Get next character</span>
239:             <span class="ruby-identifier">c</span>=<span class="ruby-identifier">s</span>[<span class="ruby-identifier">i</span>]
240:             <span class="ruby-comment cmt"># Check if ASCII or MB</span>
241:             <span class="ruby-identifier">ascii</span> = <span class="ruby-keyword kw">false</span>
242:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">c</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">128</span>
243:                 <span class="ruby-identifier">ascii</span> = <span class="ruby-keyword kw">true</span>
244:             <span class="ruby-keyword kw">end</span>
245:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">chr</span><span class="ruby-operator">==</span><span class="ruby-value str">&quot;\n&quot;</span>
246:                 <span class="ruby-comment cmt">#Explicit line break</span>
247:                 <span class="ruby-constant">Cell</span>(<span class="ruby-identifier">w</span>,<span class="ruby-identifier">h</span>,<span class="ruby-identifier">s</span>[<span class="ruby-identifier">j</span><span class="ruby-operator">..</span><span class="ruby-identifier">i</span><span class="ruby-operator">-</span><span class="ruby-identifier">j</span>],<span class="ruby-value">0</span>,<span class="ruby-value">2</span>,<span class="ruby-value str">''</span>,<span class="ruby-value">0</span>,<span class="ruby-identifier">link</span>)
248:                 <span class="ruby-identifier">i</span><span class="ruby-operator">+=</span><span class="ruby-value">1</span>
249:                 <span class="ruby-identifier">sep</span>=<span class="ruby-value">-1</span>
250:                 <span class="ruby-identifier">j</span>=<span class="ruby-identifier">i</span>
251:                 <span class="ruby-identifier">l</span>=<span class="ruby-value">0</span>
252:                 <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">nl</span><span class="ruby-operator">==</span><span class="ruby-value">1</span>
253:                     <span class="ruby-ivar">@x</span>=<span class="ruby-ivar">@lMargin</span>
254:                     <span class="ruby-identifier">w</span>=<span class="ruby-ivar">@w</span><span class="ruby-operator">-</span><span class="ruby-ivar">@rMargin</span><span class="ruby-operator">-</span><span class="ruby-ivar">@x</span>
255:                     <span class="ruby-identifier">wmax</span>=(<span class="ruby-identifier">w</span><span class="ruby-operator">-</span><span class="ruby-value">2</span><span class="ruby-operator">*</span><span class="ruby-ivar">@cMargin</span>)<span class="ruby-operator">*</span><span class="ruby-value">1000</span><span class="ruby-operator">/</span><span class="ruby-ivar">@FontSize</span>
256:                 <span class="ruby-keyword kw">end</span>
257:                 <span class="ruby-identifier">nl</span><span class="ruby-operator">+=</span><span class="ruby-value">1</span>
258:                 <span class="ruby-keyword kw">next</span>
259:             <span class="ruby-keyword kw">end</span>
260:             <span class="ruby-identifier">sep</span>=<span class="ruby-identifier">i</span> <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">not</span> <span class="ruby-identifier">ascii</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">chr</span><span class="ruby-operator">==</span><span class="ruby-value str">' '</span>
261:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">ascii</span>
262:                 <span class="ruby-identifier">l</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">cw</span>[<span class="ruby-identifier">c</span>.<span class="ruby-identifier">chr</span>]
263:             <span class="ruby-keyword kw">else</span>
264:                 <span class="ruby-identifier">l</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1000</span>
265:             <span class="ruby-keyword kw">end</span>
266:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">l</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">wmax</span>
267:                 <span class="ruby-comment cmt"># Automatic line break</span>
268:                 <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">sep</span><span class="ruby-operator">==</span><span class="ruby-value">-1</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">i</span><span class="ruby-operator">==</span><span class="ruby-identifier">j</span>
269:                     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@x</span><span class="ruby-operator">&gt;</span><span class="ruby-ivar">@lMargin</span>
270:                         <span class="ruby-comment cmt"># Move to next line</span>
271:                         <span class="ruby-ivar">@x</span>=<span class="ruby-ivar">@lMargin</span>
272:                         <span class="ruby-ivar">@y</span><span class="ruby-operator">+=</span><span class="ruby-identifier">h</span>
273:                         <span class="ruby-identifier">w</span>=<span class="ruby-ivar">@w</span><span class="ruby-operator">-</span><span class="ruby-ivar">@rMargin</span><span class="ruby-operator">-</span><span class="ruby-ivar">@x</span>
274:                         <span class="ruby-identifier">wmax</span>=(<span class="ruby-identifier">w</span><span class="ruby-operator">-</span><span class="ruby-value">2</span><span class="ruby-operator">*</span><span class="ruby-ivar">@cMargin</span>)<span class="ruby-operator">*</span><span class="ruby-value">1000</span><span class="ruby-operator">/</span><span class="ruby-ivar">@FontSize</span>
275:                         <span class="ruby-identifier">i</span><span class="ruby-operator">+=</span><span class="ruby-value">1</span>
276:                         <span class="ruby-identifier">nl</span><span class="ruby-operator">+=</span><span class="ruby-value">1</span>
277:                         <span class="ruby-keyword kw">next</span>
278:                     <span class="ruby-keyword kw">end</span>
279:                     <span class="ruby-identifier">i</span><span class="ruby-operator">+=</span><span class="ruby-identifier">ascii</span> <span class="ruby-value">? </span><span class="ruby-value">1</span> <span class="ruby-operator">:</span> <span class="ruby-value">2</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">i</span><span class="ruby-operator">==</span><span class="ruby-identifier">j</span>
280:                     <span class="ruby-constant">Cell</span>(<span class="ruby-identifier">w</span>,<span class="ruby-identifier">h</span>,<span class="ruby-identifier">s</span>[<span class="ruby-identifier">j</span><span class="ruby-operator">..</span><span class="ruby-identifier">i</span><span class="ruby-operator">-</span><span class="ruby-identifier">j</span>],<span class="ruby-value">0</span>,<span class="ruby-value">2</span>,<span class="ruby-value str">''</span>,<span class="ruby-value">0</span>,<span class="ruby-identifier">link</span>)
281:                 <span class="ruby-keyword kw">else</span>
282:                     <span class="ruby-constant">Cell</span>(<span class="ruby-identifier">w</span>,<span class="ruby-identifier">h</span>,<span class="ruby-identifier">s</span>[<span class="ruby-identifier">j</span><span class="ruby-operator">..</span><span class="ruby-identifier">sep</span><span class="ruby-operator">-</span><span class="ruby-identifier">j</span>],<span class="ruby-value">0</span>,<span class="ruby-value">2</span>,<span class="ruby-value str">''</span>,<span class="ruby-value">0</span>,<span class="ruby-identifier">link</span>)
283:                     <span class="ruby-identifier">i</span>=(<span class="ruby-identifier">s</span>[<span class="ruby-identifier">sep</span>]<span class="ruby-operator">==</span><span class="ruby-value str">' '</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">sep</span><span class="ruby-operator">+</span><span class="ruby-value">1</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">sep</span>
284:                 <span class="ruby-keyword kw">end</span>
285:                 <span class="ruby-identifier">sep</span>=<span class="ruby-value">-1</span>
286:                 <span class="ruby-identifier">j</span>=<span class="ruby-identifier">i</span>
287:                 <span class="ruby-identifier">l</span>=<span class="ruby-value">0</span>
288:                 <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">nl</span><span class="ruby-operator">==</span><span class="ruby-value">1</span>
289:                     <span class="ruby-ivar">@x</span>=<span class="ruby-ivar">@lMargin</span>
290:                     <span class="ruby-identifier">w</span>=<span class="ruby-ivar">@w</span><span class="ruby-operator">-</span><span class="ruby-ivar">@rMargin</span><span class="ruby-operator">-</span><span class="ruby-ivar">@x</span>
291:                     <span class="ruby-identifier">wmax</span>=(<span class="ruby-identifier">w</span><span class="ruby-operator">-</span><span class="ruby-value">2</span><span class="ruby-operator">*</span><span class="ruby-ivar">@cMargin</span>)<span class="ruby-operator">*</span><span class="ruby-value">1000</span><span class="ruby-operator">/</span><span class="ruby-ivar">@FontSize</span>
292:                 <span class="ruby-keyword kw">end</span>
293:                 <span class="ruby-identifier">nl</span><span class="ruby-operator">+=</span><span class="ruby-value">1</span>
294:             <span class="ruby-keyword kw">else</span>
295:                 <span class="ruby-identifier">i</span><span class="ruby-operator">+=</span><span class="ruby-identifier">ascii</span> <span class="ruby-value">? </span><span class="ruby-value">1</span> <span class="ruby-operator">:</span> <span class="ruby-value">2</span>
296:             <span class="ruby-keyword kw">end</span>
297:         <span class="ruby-keyword kw">end</span>
298: 
299:         <span class="ruby-comment cmt">#Last chunk</span>
300:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">i!</span>=<span class="ruby-identifier">j</span>
301:             <span class="ruby-constant">Cell</span>(<span class="ruby-identifier">l</span><span class="ruby-operator">/</span><span class="ruby-value">1000</span><span class="ruby-operator">*</span><span class="ruby-ivar">@FontSize</span>,<span class="ruby-identifier">h</span>,<span class="ruby-identifier">s</span>[<span class="ruby-identifier">j</span><span class="ruby-operator">..</span><span class="ruby-identifier">i</span><span class="ruby-operator">-</span><span class="ruby-identifier">j</span>],<span class="ruby-value">0</span>,<span class="ruby-value">0</span>,<span class="ruby-value str">''</span>,<span class="ruby-value">0</span>,<span class="ruby-identifier">link</span>)
302:         <span class="ruby-keyword kw">end</span>
303:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000069" class="method-detail">
        <a name="M000069"></a>

        <div class="method-heading">
          <a href="#M000069" class="method-signature">
          <span class="method-name">MultiCell</span><span class="method-args">(w,h,txt,border=0,align='L',fill=0)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000069-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000069-source">
<pre>
     <span class="ruby-comment cmt"># File vendor/plugins/active_fpdf/lib/chinese.rb, line 123</span>
123:     <span class="ruby-keyword kw">def</span> <span class="ruby-constant">MultiCell</span>(<span class="ruby-identifier">w</span>,<span class="ruby-identifier">h</span>,<span class="ruby-identifier">txt</span>,<span class="ruby-identifier">border</span>=<span class="ruby-value">0</span>,<span class="ruby-identifier">align</span>=<span class="ruby-value str">'L'</span>,<span class="ruby-identifier">fill</span>=<span class="ruby-value">0</span>)
124:         <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@CurrentFont</span>[<span class="ruby-value str">'type'</span>]<span class="ruby-operator">==</span><span class="ruby-value str">'Type0'</span>
125:             <span class="ruby-constant">MBMultiCell</span>(<span class="ruby-identifier">w</span>,<span class="ruby-identifier">h</span>,<span class="ruby-identifier">txt</span>,<span class="ruby-identifier">border</span>,<span class="ruby-identifier">align</span>,<span class="ruby-identifier">fill</span>)
126:         <span class="ruby-keyword kw">else</span>
127:             <span class="ruby-keyword kw">super</span>(<span class="ruby-identifier">w</span>,<span class="ruby-identifier">h</span>,<span class="ruby-identifier">txt</span>,<span class="ruby-identifier">border</span>,<span class="ruby-identifier">align</span>,<span class="ruby-identifier">fill</span>)
128:         <span class="ruby-keyword kw">end</span>
129:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000071" class="method-detail">
        <a name="M000071"></a>

        <div class="method-heading">
          <a href="#M000071" class="method-signature">
          <span class="method-name">Write</span><span class="method-args">(h,txt,link='')</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000071-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000071-source">
<pre>
     <span class="ruby-comment cmt"># File vendor/plugins/active_fpdf/lib/chinese.rb, line 217</span>
217:     <span class="ruby-keyword kw">def</span> <span class="ruby-constant">Write</span>(<span class="ruby-identifier">h</span>,<span class="ruby-identifier">txt</span>,<span class="ruby-identifier">link</span>=<span class="ruby-value str">''</span>)
218:         <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@CurrentFont</span>[<span class="ruby-value str">'type'</span>]<span class="ruby-operator">==</span><span class="ruby-value str">'Type0'</span>
219:             <span class="ruby-constant">MBWrite</span>(<span class="ruby-identifier">h</span>,<span class="ruby-identifier">txt</span>,<span class="ruby-identifier">link</span>)
220:         <span class="ruby-keyword kw">else</span>
221:             <span class="ruby-keyword kw">super</span>(<span class="ruby-identifier">h</span>,<span class="ruby-identifier">txt</span>,<span class="ruby-identifier">link</span>)
222:         <span class="ruby-keyword kw">end</span>
223:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>