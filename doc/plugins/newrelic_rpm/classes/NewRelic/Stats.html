<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Module: NewRelic::Stats</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href="../.././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Module</strong></td>
          <td class="class-name-in-header">NewRelic::Stats</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../../files/vendor/plugins/newrelic_rpm/lib/newrelic/stats_rb.html">
                vendor/plugins/newrelic_rpm/lib/newrelic/stats.rb
                </a>
        <br />
            </td>
        </tr>

        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">



   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000127">as_percentage_of</a>&nbsp;&nbsp;
      <a href="#M000121">average_call_time</a>&nbsp;&nbsp;
      <a href="#M000122">average_exclusive_time</a>&nbsp;&nbsp;
      <a href="#M000135">average_response_time</a>&nbsp;&nbsp;
      <a href="#M000134">average_value</a>&nbsp;&nbsp;
      <a href="#M000129">calls_per_minute</a>&nbsp;&nbsp;
      <a href="#M000130">calls_per_second</a>&nbsp;&nbsp;
      <a href="#M000128">duration</a>&nbsp;&nbsp;
      <a href="#M000133">exclusive_time_percentage</a>&nbsp;&nbsp;
      <a href="#M000139">fraction_of</a>&nbsp;&nbsp;
      <a href="#M000124">merge</a>&nbsp;&nbsp;
      <a href="#M000123">merge!</a>&nbsp;&nbsp;
      <a href="#M000140">multiply_by</a>&nbsp;&nbsp;
      <a href="#M000126">reset</a>&nbsp;&nbsp;
      <a href="#M000138">round!</a>&nbsp;&nbsp;
      <a href="#M000125">split</a>&nbsp;&nbsp;
      <a href="#M000131">standard_deviation</a>&nbsp;&nbsp;
      <a href="#M000137">summary</a>&nbsp;&nbsp;
      <a href="#M000132">time_percentage</a>&nbsp;&nbsp;
      <a href="#M000136">to_s</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">





      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M000127" class="method-detail">
        <a name="M000127"></a>

        <div class="method-heading">
          <a href="#M000127" class="method-signature">
          <span class="method-name">as_percentage_of</span><span class="method-args">(other_stats)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000127-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000127-source">
<pre>
    <span class="ruby-comment cmt"># File vendor/plugins/newrelic_rpm/lib/newrelic/stats.rb, line 80</span>
80:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">as_percentage_of</span>(<span class="ruby-identifier">other_stats</span>)
81:       <span class="ruby-keyword kw">return</span> <span class="ruby-value">0</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">other_stats</span>.<span class="ruby-identifier">total_call_time</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
82:       <span class="ruby-keyword kw">return</span> (<span class="ruby-identifier">total_call_time</span> <span class="ruby-operator">/</span> <span class="ruby-identifier">other_stats</span>.<span class="ruby-identifier">total_call_time</span>).<span class="ruby-identifier">to_percentage</span>
83:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000121" class="method-detail">
        <a name="M000121"></a>

        <div class="method-heading">
          <a href="#M000121" class="method-signature">
          <span class="method-name">average_call_time</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000121-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000121-source">
<pre>
   <span class="ruby-comment cmt"># File vendor/plugins/newrelic_rpm/lib/newrelic/stats.rb, line 5</span>
5:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">average_call_time</span>
6:       <span class="ruby-keyword kw">return</span> <span class="ruby-value">0</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">call_count</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
7:       <span class="ruby-identifier">total_call_time</span> <span class="ruby-operator">/</span> <span class="ruby-identifier">call_count</span>
8:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000122" class="method-detail">
        <a name="M000122"></a>

        <div class="method-heading">
          <a href="#M000122" class="method-signature">
          <span class="method-name">average_exclusive_time</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000122-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000122-source">
<pre>
    <span class="ruby-comment cmt"># File vendor/plugins/newrelic_rpm/lib/newrelic/stats.rb, line 9</span>
 9:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">average_exclusive_time</span>
10:       <span class="ruby-keyword kw">return</span> <span class="ruby-value">0</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">call_count</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
11:       <span class="ruby-identifier">total_exclusive_time</span> <span class="ruby-operator">/</span> <span class="ruby-identifier">call_count</span>
12:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000135" class="method-detail">
        <a name="M000135"></a>

        <div class="method-heading">
          <span class="method-name">average_response_time</span><span class="method-args">()</span>
        </div>
      
        <div class="method-description">
          <p>
Alias for <a href="Stats.html#M000121">average_call_time</a>
</p>
        </div>
      </div>

      <div id="method-M000134" class="method-detail">
        <a name="M000134"></a>

        <div class="method-heading">
          <span class="method-name">average_value</span><span class="method-args">()</span>
        </div>
      
        <div class="method-description">
          <p>
Alias for <a href="Stats.html#M000121">average_call_time</a>
</p>
        </div>
      </div>

      <div id="method-M000129" class="method-detail">
        <a name="M000129"></a>

        <div class="method-heading">
          <a href="#M000129" class="method-signature">
          <span class="method-name">calls_per_minute</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000129-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000129-source">
<pre>
    <span class="ruby-comment cmt"># File vendor/plugins/newrelic_rpm/lib/newrelic/stats.rb, line 89</span>
89:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">calls_per_minute</span>
90:       <span class="ruby-keyword kw">return</span> <span class="ruby-value">0</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">duration</span>.<span class="ruby-identifier">zero?</span>
91:       ((<span class="ruby-identifier">call_count</span> <span class="ruby-operator">/</span> <span class="ruby-identifier">duration</span>.<span class="ruby-identifier">to_f</span> <span class="ruby-operator">*</span> <span class="ruby-value">6000</span>).<span class="ruby-identifier">round</span>).<span class="ruby-identifier">to_f</span> <span class="ruby-operator">/</span> <span class="ruby-value">100</span>
92:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000130" class="method-detail">
        <a name="M000130"></a>

        <div class="method-heading">
          <a href="#M000130" class="method-signature">
          <span class="method-name">calls_per_second</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000130-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000130-source">
<pre>
    <span class="ruby-comment cmt"># File vendor/plugins/newrelic_rpm/lib/newrelic/stats.rb, line 94</span>
94:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">calls_per_second</span>
95:       (<span class="ruby-identifier">calls_per_minute</span> <span class="ruby-operator">/</span> <span class="ruby-value">60</span>).<span class="ruby-identifier">round_to</span>(<span class="ruby-value">2</span>)
96:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000128" class="method-detail">
        <a name="M000128"></a>

        <div class="method-heading">
          <a href="#M000128" class="method-signature">
          <span class="method-name">duration</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000128-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000128-source">
<pre>
    <span class="ruby-comment cmt"># File vendor/plugins/newrelic_rpm/lib/newrelic/stats.rb, line 85</span>
85:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">duration</span>
86:       <span class="ruby-identifier">end_time</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">begin_time</span>
87:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000133" class="method-detail">
        <a name="M000133"></a>

        <div class="method-heading">
          <a href="#M000133" class="method-signature">
          <span class="method-name">exclusive_time_percentage</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000133-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000133-source">
<pre>
     <span class="ruby-comment cmt"># File vendor/plugins/newrelic_rpm/lib/newrelic/stats.rb, line 116</span>
116:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">exclusive_time_percentage</span>
117:       <span class="ruby-keyword kw">return</span> <span class="ruby-value">0</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">duration</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
118:       <span class="ruby-identifier">total_exclusive_time</span> <span class="ruby-operator">/</span> <span class="ruby-identifier">duration</span>
119:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000139" class="method-detail">
        <a name="M000139"></a>

        <div class="method-heading">
          <a href="#M000139" class="method-signature">
          <span class="method-name">fraction_of</span><span class="method-args">(s)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
calculate this set of stats to be a percentage fraction of the provided
stats, which has an overlapping time window. used as a key part of the <a
href="Stats.html#M000125">split</a> algorithm
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000139-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000139-source">
<pre>
     <span class="ruby-comment cmt"># File vendor/plugins/newrelic_rpm/lib/newrelic/stats.rb, line 156</span>
156:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">fraction_of</span>(<span class="ruby-identifier">s</span>)
157:       <span class="ruby-identifier">min_end</span> = (<span class="ruby-identifier">end_time</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">s</span>.<span class="ruby-identifier">end_time</span> <span class="ruby-value">? </span><span class="ruby-identifier">end_time</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">s</span>.<span class="ruby-identifier">end_time</span>)
158:       <span class="ruby-identifier">max_begin</span> = (<span class="ruby-identifier">begin_time</span> <span class="ruby-operator">&gt;</span> <span class="ruby-identifier">s</span>.<span class="ruby-identifier">begin_time</span> <span class="ruby-value">? </span><span class="ruby-identifier">begin_time</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">s</span>.<span class="ruby-identifier">begin_time</span>)
159:       <span class="ruby-identifier">percentage</span> = (<span class="ruby-identifier">min_end</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">max_begin</span>) <span class="ruby-operator">/</span> <span class="ruby-identifier">s</span>.<span class="ruby-identifier">duration</span>
160:       
161:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">total_call_time</span> = <span class="ruby-identifier">s</span>.<span class="ruby-identifier">total_call_time</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">percentage</span>
162:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">min_call_time</span> = <span class="ruby-identifier">s</span>.<span class="ruby-identifier">min_call_time</span>
163:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">max_call_time</span> = <span class="ruby-identifier">s</span>.<span class="ruby-identifier">max_call_time</span>
164:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">call_count</span> = <span class="ruby-identifier">s</span>.<span class="ruby-identifier">call_count</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">percentage</span>
165:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">sum_of_squares</span> = (<span class="ruby-identifier">s</span>.<span class="ruby-identifier">sum_of_squares</span> <span class="ruby-operator">||</span> <span class="ruby-value">0</span>) <span class="ruby-operator">*</span> <span class="ruby-identifier">percentage</span>
166:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000124" class="method-detail">
        <a name="M000124"></a>

        <div class="method-heading">
          <a href="#M000124" class="method-signature">
          <span class="method-name">merge</span><span class="method-args">(other_stats)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000124-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000124-source">
<pre>
    <span class="ruby-comment cmt"># File vendor/plugins/newrelic_rpm/lib/newrelic/stats.rb, line 29</span>
29:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">merge</span> (<span class="ruby-identifier">other_stats</span>)
30:       <span class="ruby-identifier">stats</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">clone</span>
31:       <span class="ruby-identifier">stats</span>.<span class="ruby-identifier">merge!</span> <span class="ruby-identifier">other_stats</span>
32:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000123" class="method-detail">
        <a name="M000123"></a>

        <div class="method-heading">
          <a href="#M000123" class="method-signature">
          <span class="method-name">merge!</span><span class="method-args">(other_stats)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000123-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000123-source">
<pre>
    <span class="ruby-comment cmt"># File vendor/plugins/newrelic_rpm/lib/newrelic/stats.rb, line 14</span>
14:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">merge!</span> (<span class="ruby-identifier">other_stats</span>)
15:       <span class="ruby-constant">Array</span>(<span class="ruby-identifier">other_stats</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">s</span><span class="ruby-operator">|</span>
16:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">total_call_time</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">s</span>.<span class="ruby-identifier">total_call_time</span>
17:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">total_exclusive_time</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">s</span>.<span class="ruby-identifier">total_exclusive_time</span>
18:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">min_call_time</span> = <span class="ruby-identifier">s</span>.<span class="ruby-identifier">min_call_time</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">s</span>.<span class="ruby-identifier">min_call_time</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">min_call_time</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">call_count</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
19:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">max_call_time</span> = <span class="ruby-identifier">s</span>.<span class="ruby-identifier">max_call_time</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">s</span>.<span class="ruby-identifier">max_call_time</span> <span class="ruby-operator">&gt;</span> <span class="ruby-identifier">max_call_time</span>
20:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">call_count</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">s</span>.<span class="ruby-identifier">call_count</span>
21:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">sum_of_squares</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">s</span>.<span class="ruby-identifier">sum_of_squares</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">s</span>.<span class="ruby-identifier">sum_of_squares</span>
22:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">begin_time</span> = <span class="ruby-identifier">s</span>.<span class="ruby-identifier">begin_time</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">s</span>.<span class="ruby-identifier">begin_time</span>.<span class="ruby-identifier">to_f</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">begin_time</span>.<span class="ruby-identifier">to_f</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">begin_time</span>.<span class="ruby-identifier">to_f</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span><span class="ruby-value">.0</span>
23:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">end_time</span> = <span class="ruby-identifier">s</span>.<span class="ruby-identifier">end_time</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">s</span>.<span class="ruby-identifier">end_time</span>.<span class="ruby-identifier">to_f</span> <span class="ruby-operator">&gt;</span> <span class="ruby-identifier">end_time</span>.<span class="ruby-identifier">to_f</span>
24:       <span class="ruby-keyword kw">end</span>
25:       
26:       <span class="ruby-keyword kw">self</span>
27:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000140" class="method-detail">
        <a name="M000140"></a>

        <div class="method-heading">
          <a href="#M000140" class="method-signature">
          <span class="method-name">multiply_by</span><span class="method-args">(percentage)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
multiply the total time and rate by the given percentage
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000140-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000140-source">
<pre>
     <span class="ruby-comment cmt"># File vendor/plugins/newrelic_rpm/lib/newrelic/stats.rb, line 169</span>
169:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">multiply_by</span>(<span class="ruby-identifier">percentage</span>)
170:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">total_call_time</span> = <span class="ruby-identifier">total_call_time</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">percentage</span>
171:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">call_count</span> = <span class="ruby-identifier">call_count</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">percentage</span>
172:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">sum_of_squares</span> = <span class="ruby-identifier">sum_of_squares</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">percentage</span>
173:       
174:       <span class="ruby-keyword kw">self</span>
175:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000126" class="method-detail">
        <a name="M000126"></a>

        <div class="method-heading">
          <a href="#M000126" class="method-signature">
          <span class="method-name">reset</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000126-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000126-source">
<pre>
    <span class="ruby-comment cmt"># File vendor/plugins/newrelic_rpm/lib/newrelic/stats.rb, line 69</span>
69:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">reset</span>
70:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">call_count</span> = <span class="ruby-value">0</span>
71:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">total_call_time</span> = <span class="ruby-value">0</span><span class="ruby-value">.0</span>
72:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">total_exclusive_time</span> = <span class="ruby-value">0</span><span class="ruby-value">.0</span>
73:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">min_call_time</span> = <span class="ruby-value">0</span><span class="ruby-value">.0</span>
74:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">max_call_time</span> = <span class="ruby-value">0</span><span class="ruby-value">.0</span>
75:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">sum_of_squares</span> = <span class="ruby-value">0</span><span class="ruby-value">.0</span>
76:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">begin_time</span> = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value">0</span>)
77:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">end_time</span> = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value">0</span>)
78:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000138" class="method-detail">
        <a name="M000138"></a>

        <div class="method-heading">
          <a href="#M000138" class="method-signature">
          <span class="method-name">round!</span><span class="method-args">(decimal_places = 3)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
round all of the values to n decimal points
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000138-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000138-source">
<pre>
     <span class="ruby-comment cmt"># File vendor/plugins/newrelic_rpm/lib/newrelic/stats.rb, line 143</span>
143:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">round!</span>(<span class="ruby-identifier">decimal_places</span> = <span class="ruby-value">3</span>)
144:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">total_call_time</span> = <span class="ruby-identifier">total_call_time</span>.<span class="ruby-identifier">round_to</span>(<span class="ruby-identifier">decimal_places</span>)
145:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">total_exclusive_time</span> = <span class="ruby-identifier">total_exclusive_time</span>.<span class="ruby-identifier">round_to</span>(<span class="ruby-identifier">decimal_places</span>)
146:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">min_call_time</span> = <span class="ruby-identifier">min_call_time</span>.<span class="ruby-identifier">round_to</span>(<span class="ruby-identifier">decimal_places</span>)
147:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">max_call_time</span> = <span class="ruby-identifier">max_call_time</span>.<span class="ruby-identifier">round_to</span>(<span class="ruby-identifier">decimal_places</span>)
148:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">sum_of_squares</span> = <span class="ruby-identifier">sum_of_squares</span>.<span class="ruby-identifier">round_to</span>(<span class="ruby-identifier">decimal_places</span>)
149:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">begin_time</span> = <span class="ruby-identifier">begin_time</span>.<span class="ruby-identifier">round</span>
150:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">end_time</span> = <span class="ruby-identifier">end_time</span>.<span class="ruby-identifier">round</span>
151:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000125" class="method-detail">
        <a name="M000125"></a>

        <div class="method-heading">
          <a href="#M000125" class="method-signature">
          <span class="method-name">split</span><span class="method-args">(rollup_begin_time, rollup_period) {|current_begin_time, current_end_time| ...}</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
<a href="Stats.html#M000125">split</a> into an array of timesclices whose
time boundaries start on (begin_time + (n * <a
href="Stats.html#M000128">duration</a>)) and whose end time ends on
(begin_time * (n + 1) * <a href="Stats.html#M000128">duration</a>), except
for the first and last elements, whose begin time and end time are the
begin and end times of this stats instance, respectively. Yield to caller
for the code that creates the actual stats instance
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000125-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000125-source">
<pre>
    <span class="ruby-comment cmt"># File vendor/plugins/newrelic_rpm/lib/newrelic/stats.rb, line 40</span>
40:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">split</span>(<span class="ruby-identifier">rollup_begin_time</span>, <span class="ruby-identifier">rollup_period</span>)
41:       <span class="ruby-identifier">rollup_begin_time</span> = <span class="ruby-identifier">rollup_begin_time</span>.<span class="ruby-identifier">to_f</span>
42:       <span class="ruby-identifier">rollup_begin_time</span> <span class="ruby-operator">+=</span> ((<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">begin_time</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">rollup_begin_time</span>) <span class="ruby-operator">/</span> <span class="ruby-identifier">rollup_period</span>).<span class="ruby-identifier">floor</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">rollup_period</span>
43: 
44:       <span class="ruby-identifier">current_begin_time</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">begin_time</span>
45:       <span class="ruby-identifier">current_end_time</span> = <span class="ruby-identifier">rollup_begin_time</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">rollup_period</span>
46: 
47:       <span class="ruby-keyword kw">return</span> [<span class="ruby-keyword kw">self</span>] <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">current_end_time</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">end_time</span>
48:       
49:       <span class="ruby-identifier">timeslices</span> = []
50:       <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">current_end_time</span> <span class="ruby-operator">&lt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">end_time</span> <span class="ruby-keyword kw">do</span>
51:         <span class="ruby-identifier">ts</span> = <span class="ruby-keyword kw">yield</span>(<span class="ruby-identifier">current_begin_time</span>, <span class="ruby-identifier">current_end_time</span>)
52:         
53:         <span class="ruby-identifier">ts</span>.<span class="ruby-identifier">fraction_of</span>(<span class="ruby-keyword kw">self</span>)
54:         <span class="ruby-identifier">timeslices</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">ts</span>
55:         <span class="ruby-identifier">current_begin_time</span> = <span class="ruby-identifier">current_end_time</span>
56:         <span class="ruby-identifier">current_end_time</span> = <span class="ruby-identifier">current_begin_time</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">rollup_period</span>
57:       <span class="ruby-keyword kw">end</span>
58:       
59:       <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">end_time</span> <span class="ruby-operator">&gt;</span> <span class="ruby-identifier">current_begin_time</span>
60:         <span class="ruby-identifier">percentage</span> = <span class="ruby-identifier">rollup_period</span> <span class="ruby-operator">/</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">duration</span> <span class="ruby-operator">+</span> (<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">begin_time</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">rollup_begin_time</span>) <span class="ruby-operator">/</span> <span class="ruby-identifier">rollup_period</span>
61:         <span class="ruby-identifier">ts</span> = <span class="ruby-keyword kw">yield</span>(<span class="ruby-identifier">current_begin_time</span>, <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">end_time</span>)
62:         <span class="ruby-identifier">ts</span>.<span class="ruby-identifier">fraction_of</span>(<span class="ruby-keyword kw">self</span>)
63:         <span class="ruby-identifier">timeslices</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">ts</span>
64:       <span class="ruby-keyword kw">end</span>
65:       
66:       <span class="ruby-identifier">timeslices</span>
67:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000131" class="method-detail">
        <a name="M000131"></a>

        <div class="method-heading">
          <a href="#M000131" class="method-signature">
          <span class="method-name">standard_deviation</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000131-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000131-source">
<pre>
     <span class="ruby-comment cmt"># File vendor/plugins/newrelic_rpm/lib/newrelic/stats.rb, line 98</span>
 98:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">standard_deviation</span>
 99:       <span class="ruby-keyword kw">return</span> <span class="ruby-value">0</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">call_count</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">2</span> <span class="ruby-operator">||</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">sum_of_squares</span>.<span class="ruby-identifier">nil?</span>
100:       
101:       <span class="ruby-comment cmt"># Convert sum of squares into standard deviation based on</span>
102:       <span class="ruby-comment cmt"># formula for the standard deviation for the entire population</span>
103:       <span class="ruby-identifier">x</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">sum_of_squares</span> <span class="ruby-operator">-</span> (<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">call_count</span> <span class="ruby-operator">*</span> (<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">average_value</span><span class="ruby-operator">**</span><span class="ruby-value">2</span>))
104:       <span class="ruby-keyword kw">return</span> <span class="ruby-value">0</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">x</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-value">0</span>
105:       
106:       <span class="ruby-constant">Math</span>.<span class="ruby-identifier">sqrt</span>(<span class="ruby-identifier">x</span> <span class="ruby-operator">/</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">call_count</span>)
107:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000137" class="method-detail">
        <a name="M000137"></a>

        <div class="method-heading">
          <a href="#M000137" class="method-signature">
          <span class="method-name">summary</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Summary string to facilitate testing
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000137-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000137-source">
<pre>
     <span class="ruby-comment cmt"># File vendor/plugins/newrelic_rpm/lib/newrelic/stats.rb, line 137</span>
137:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">summary</span>
138:       <span class="ruby-identifier">format</span> = <span class="ruby-value str">&quot;%m/%d %I:%M%p&quot;</span>
139:       <span class="ruby-node">&quot;[#{Time.at(begin_time).strftime(format)}, #{duration}s. #{call_count} calls; #{average_call_time.to_ms}ms]&quot;</span>
140:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000132" class="method-detail">
        <a name="M000132"></a>

        <div class="method-heading">
          <a href="#M000132" class="method-signature">
          <span class="method-name">time_percentage</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
returns the time spent in this component as a percentage of the total time
window.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000132-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000132-source">
<pre>
     <span class="ruby-comment cmt"># File vendor/plugins/newrelic_rpm/lib/newrelic/stats.rb, line 111</span>
111:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">time_percentage</span>
112:       <span class="ruby-keyword kw">return</span> <span class="ruby-value">0</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">duration</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
113:       <span class="ruby-identifier">total_call_time</span> <span class="ruby-operator">/</span> <span class="ruby-identifier">duration</span>
114:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000136" class="method-detail">
        <a name="M000136"></a>

        <div class="method-heading">
          <a href="#M000136" class="method-signature">
          <span class="method-name">to_s</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000136-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000136-source">
<pre>
     <span class="ruby-comment cmt"># File vendor/plugins/newrelic_rpm/lib/newrelic/stats.rb, line 124</span>
124:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_s</span>
125:       <span class="ruby-identifier">s</span> = <span class="ruby-node">&quot;Begin=#{begin_time}, &quot;</span>
126:       <span class="ruby-identifier">s</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;Duration=#{duration} s, &quot;</span>
127:       <span class="ruby-identifier">s</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;Count=#{call_count}, &quot;</span>
128:       <span class="ruby-identifier">s</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;Total=#{total_call_time.to_ms}, &quot;</span>
129:       <span class="ruby-identifier">s</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;Total Exclusive=#{total_exclusive_time.to_ms}, &quot;</span>
130:       <span class="ruby-identifier">s</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;Avg=#{average_call_time.to_ms}, &quot;</span>
131:       <span class="ruby-identifier">s</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;Min=#{min_call_time.to_ms}, &quot;</span>
132:       <span class="ruby-identifier">s</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;Max=#{max_call_time.to_ms}, &quot;</span>
133:       <span class="ruby-identifier">s</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;StdDev=#{standard_deviation.to_ms}&quot;</span>
134:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>