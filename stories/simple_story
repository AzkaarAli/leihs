Story: Simple

	As an inventory_manager
	I want to see all new orders and acknowledge them
	in order to have control over who is receiving what

	Scenario: Test
	
	Given None
	
	When Nothing happens

	Then flash appears
	
	


  Scenario: Swap Package

  Given a model 'NEC 245' exists
  And 7 items of model 'NEC 245' exist
  And a model 'NEC 333' exists
  And 5 items of model 'NEC 333' exist
  And a new order is placed by a user named 'Joe'
  And it asks for 5 items of model 'NEC 245'
  And Joe's email address is joe@test.ch

  When he chooses Joe's order

  Then Joe's order is opened in tab

  When he selects line 'NEC 245' 

  Then Swap Item screen opens

  When inventory_manager searches for 'NEC 333'

  Then a choice of 1 item appears

  When inventory_manager selects 'NEC 333'
  Then he sees 5 items of model 'NEC 333'
  When he adds a personal message: "NEC 333 is better than NEC 245"
  And inventory_manager approves order

  Then joe@test.ch receives an email
  And its subject is 'Reservation with changes confirmed'
  And it contains information "5 NEC 333"
  And it contains information "Swapped 5 NEC 245 for 5 NEC 333"
  And it contains information "NEC 333 is better than NEC 245"



  Scenario: Draft

  Given a model 'NEC 245' exists
  And 7 items of model 'NEC 245' exist
  And a new order is placed by a user named 'Joe'

  When he chooses Joe's order
  And adds 1 item 'NEC 245'
  And the inventory_manager clicks 'acknowledge'

  Then he sees 1 order
  And the order has 'draft' status

  When he chooses Joe's order

  Then he sees 1 NEC 245
  And he can revert order
  And he can approve order
  And he can reject order
