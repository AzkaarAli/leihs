<div id='errors'>
	<%#TODO= render :partial => 'errors' %>
</div>

<%= render :partial => 'buttons' %>

			<div id="meta" class="boxes">
				<div id="meta-contract">
					<%= show_reserver(@user) %>
				</div>
				
			</div>

			<div class="table-overview">
								
				<div class="toolbar-second">
					<h3><%= _("Items") %></h3>
					<div class="buttons">
						<%= greybox_link_to_page(icon_tag("shape_align_left") + " " + _("Timeline"),
						 		{ :action => 'timeline'},
								:title => _("Timeline"), :width => 1000 ) %>						
					</div>
				</div>
				
				<table cellspacing="0">
					<!-- start header -->
						<tr>
							<th scope="col">
								<input type="checkbox" id="contract_lines" onClick="mark_all(this, 'contract_line_check', 'ghostable_group_1');" /> <%= _("Check all") %>
								<br />
								<input type="checkbox" id="contract_lines" onClick="mark_all(this, 'contract_line_check_today', 'ghostable_group_1');" /> <%= _("Check today's") %>
							</th>
							<th scope="col"><%= _("Contract") %></th>
							<th scope="col"><%= _("Item") %></th>
							<th scope="col"><%= _("Time frame") %></th>
							<th scope="col">
								<%= _("Barcode") %>
								<br />
								<%= text_field_tag(:inventory_code, nil, { :size => 10, :onchange => remote_function( :url => { :action => 'assign_inventory_code', :user_id => @user.id }, :with => "'code=' + value" ) }) %>
							</th>
							<th scope="col"><%= _("Action") %></th>
						</tr>
					<!-- end header -->
					<tbody id='lines'>
						<%= render :partial => 'lines' %>
					</tbody>
				</table>				

				<%= javascript_tag("$('inventory_code').focus()") %>
						
			</div>
			

			<div class="table-overview">
								
				<div class="toolbar-second">
					<h3><%= _("Options") %></h3>
					<div class="buttons">
						<%= greybox_link_to_page(icon_tag("shape_align_left") + " " + _("Timeline"),
						 	{ :action => 'timeline', :user_id => @user.id },
							:title => _("Timeline"), :width => 1000 ) %>						
					</div>
				</div>
				
				<table cellspacing="0">
        	<tr>
        		<th scope="col"><input type="checkbox"  id="options" onClick="mark_all(this, 'option_check', 'ghostable_group_2');" /> <%= _("Check all") %> </th>
        		<th scope="col"><%= _("Quantity") %></th>
        		<th scope="col"><%= _("Description") %></th>
        	</tr>

          <% @user.contracts.signed_contracts.each do |c|
    			  c.options.each do |option| 
    			%>        		
    			<tr class="alt-row">
        			<td><%= check_box_tag('options[]', option.id, false, :class => "option_check", :onchange => "toggle_buttons('option_check', 'ghostable_group_2');" ) %>
        			</td>
        			<td><%= option.quantity %></td>
        			<td><%= option.name %></td>
        		</tr>
        <%  end	
          end	%>								
        </table>
				
      </div>

<%= render :partial => 'buttons' %>


