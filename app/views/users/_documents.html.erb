<%	a = []
	(current_user.orders + current_user.contracts).sort.each {|x| a << [x.id, x.class.to_s, x.created_at]}
%>
    var documents_grid = new Ext.grid.GridPanel({
							title: 'Documents (<%= a.size %>)',
							autoHeight: true,
							height: 'auto',
							border: false,
							viewConfig: { forceFit: true },
							store: new Ext.data.SimpleStore({
										 fields: [	{name: 'id', type: 'int'},
										 			{name: 'document', type: 'string'},
	   											  	{name: 'created_at', type: 'date' }	],
										 data: <%= a.to_json %>
										}),
					        cm:  new Ext.grid.ColumnModel([
									{
							           header: "Document",
							           dataIndex: 'document',
									   width: 100
									},{
							           header: "ID",
							           dataIndex: 'id',
									   width: 20
									},{
							           header: "Date",
							           dataIndex: 'created_at',
									   width: 100,
									   renderer: function(value,p,r){ return formatDate(value); }
									}]),
									listeners: {
										rowclick: function( grid, rowIndex, e ){
										  record = grid.getStore().getAt(rowIndex);
										  x_id = record.data.id;
										  x_document = record.data.document;

											panel_id = x_document + ' ' + x_id;
							 				document_panel = account_panel.getComponent(panel_id);
							 				if(!document_panel){
											    document_panel = new Ext.Panel({
													id: panel_id,
											        title: panel_id,
													closable: true,
												    autoScroll:true,
	//												html: "here document " + x_document + " " + x_id
													html: "<object type='application/pdf' data='/users/show_document/" + x_id + ".pdf' width='100%' height='100%'> </object>"
	//								                html: "<iframe src='/users/show_document/" + x_id + ".pdf' width='100%' height='500' frameborder='0'></iframe>"
											    });
												account_panel.add(document_panel);
											}
											account_panel.activate(document_panel);
/*
											document_panel.load({
											    url: '/users/show_document/' + x_id + '.pdf',
											    text: "Loading...",
											    timeout: 30,
												scripts: true
											});
*/
										}
									},
					        tbar: ['->',
								new Ext.Action({
							        text: 'Timeline Contracts',
									iconCls:'bt',
						            icon:'<%= $layout_public_path + "/images/icons/shape_align_left.png" %>',
							        handler: function(){
										account_panel.add(user_timeline);
							            Ext.getDom('user_timeline').innerHTML = "<iframe src='/users/timeline' width='100%' height='500' frameborder='0'></iframe>";
										account_panel.activate(user_timeline);
							        }
							    })
					        ]
	                    });
						