
    // create the Data Store
    var basket_store = new Ext.data.Store({
        proxy: new Ext.data.HttpProxy(
			new Ext.data.Connection({
            	url: '/frontend/basket',
				method: 'GET',
				extraParams: {format:'ext_json'}
			})
        ),

        // create reader that reads the Topic records
        reader: new Ext.data.JsonReader({
            root: 'order_lines',
            totalProperty: 'results',
            id: 'id',
            fields: [
                'model_id', 'order_id'
            ]
        }),

        // turn on remote sorting
        remoteSort: true
    });
	
    // the column model has information about grid columns
    // dataIndex maps the column to the specific data field in
    // the data store
    var cm = new Ext.grid.ColumnModel([{
           header: "Model_id",
           dataIndex: 'model_id',
           width: 100
        },{
           header: "Order_id",
           dataIndex: 'order_id',
           width: 100
        }]);

    // by default columns are sortable
    cm.defaultSortable = true;

    var basket = new Ext.grid.GridPanel({
        el:'basket',
        title:'Basket',
        store: basket_store,
        cm: cm,
        loadMask: true,
		listeners: {
			rowclick: function( grid, rowIndex, e ){
				x_id = grid.getStore().getAt(rowIndex).id;
				new Ajax.Updater('south', '/models/details/' + x_id, {asynchronous:true, evalScripts:true, parameters:'authenticity_token=' + encodeURIComponent('7839094fc4f002d4585df81e6486429aba7c9350')}); return false;
			}
		}
    });

	basket.render();
	
    // trigger the data store load
    basket_store.load();


  