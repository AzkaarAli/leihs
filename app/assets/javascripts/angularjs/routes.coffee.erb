root = global ? window
angular = root.angular

app = angular.module("Leihs", ['users', 'filters', 'directives', 'ui']).config(['$routeProvider', '$locationProvider', ($routeProvider, $locationProvider) ->
  #$locationProvider.hashPrefix('');
  $locationProvider.html5Mode true
  $routeProvider.when("/backend/inventory_pools/:inventory_pool_id/users",
    controller: UsersIndexCtrl
    templateUrl: '<%= asset_path("angularjs/templates/users/index.html") %>'
  ).when("/backend/inventory_pools/:inventory_pool_id/users/:id/edit",
      controller: UsersEditCtrl
      templateUrl: '<%= asset_path("angularjs/templates/users/edit.html") %>'
  )
]).run(['$location', '$rootElement', ($location, $rootElement) ->
    # http://stackoverflow.com/a/11785196/1966785
    $rootElement.off('click')
])

app.run ($rootScope)->
    $rootScope._jed = (args...)->
        _jed.apply(this, args)

root.app = app
