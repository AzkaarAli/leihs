%ul.line{:class => "${type}"}
  .container
  
    {{tmpl($item.data.user) "tmpl/cell/user_name"}}
    {{tmpl($item.data) "tmpl/cell/items"}}
    
    %li.date
      {{html formatDate(new Date(created_at.replace(/T.*$/g, "").replace(/-/g, "/")), i18n.selected.tips.dateFormat)}}
    
    %li.range
      {{if lines.length}}    
      %span.text
        %span.grey
          = _("for max.")
      %span.number
        ${$max_range = new MaxRange(lines), ""}
        ${$max_range.value}
      %span.text
        = _("Days")
      {{/if}}
        
    {{if String(purpose).length > 55}}
    %li.purpose.hastip
      %span.text
        {{html String(purpose).substring(0, 55) }}
        {{if String(purpose).length > 55}}
        {{html "..."}}
        {{/if}}
      .tip
        %p
          ${purpose}
    {{else}}
    %li.purpose
      %span.text
        ${purpose}
    {{/if}}
        
  %li.actions
    .multibutton
      .alternatives
        .trigger
          .arrow
        = link_to "/backend/inventory_pools/${current_inventory_pool}/acknowledge/${id}", :class => "button white" do
          .icon.edit
          = _("Edit")
        
        -#TODO: "/backend/inventory_pools/${current_inventory_pool}/acknowledge/${id}/approve"
        -#TODO: :remote => true,
        = link_to "", :onclick => "alert('Diese Funktion wird bald implementiert...'); return false;",  
          :class => "button white",
          :method => :post,
          :"data-rel" => "tmpl/dialog/acknowledge/approve", 
          :"data-dialog_class" => "acknowledge",
          :"data-on_success" => 'window.location = "http://"+location.host+"/backend/inventory_pools/${current_inventory_pool}/users/${user.id}/hand_over"',
          :"data-ref_for_dialog" => "$(this).closest('.line').tmplItem().data" do
          .icon.hand_over
          = _("Hand Over")
          
        = link_to "/backend/inventory_pools/${current_inventory_pool}/acknowledge/${id}/reject", 
          :class => "button red open_dialog", 
          :"data-rel" => "tmpl/dialog/acknowledge/reject", 
          :"data-dialog_class" => "acknowledge with_comment",
          :"data-on_success" => 'List.remove_line({"element": $(this).closest(".dialog").data("trigger").closest(".line"), "color": "red"})',
          :"data-ref_for_dialog" => "$(this).closest('.line').tmplItem().data" do
          .icon.delete
          = _("Reject")
          
      = link_to "/backend/inventory_pools/${current_inventory_pool}/acknowledge/${id}/approve", 
        :class => "button white",
        :remote => true,
        :method => :post,
        :"data-rel" => "tmpl/dialog/acknowledge/approve", 
        :"data-dialog_class" => "acknowledge with_comment",
        :"data-on_success" => 'List.remove_line({"element": $(this).closest(".line"), "color": "green"})',
        :"data-ref_for_dialog" => "$(this).closest('.line').tmplItem().data" do
        .icon.approve
        = _("Quick Approve")